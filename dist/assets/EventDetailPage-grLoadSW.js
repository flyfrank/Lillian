import{l as e,e as t}from"./main-P02DDxIB.js";class n{constructor(e={}){var t;this.props=e,this.eventId=null==(t=e.params)?void 0:t.id,this.event=null,this.swiperInstance=null}async render(){var t,n;return this.event=e.find(e=>e.id===this.eventId),this.event?'\n      <div class="event-detail-page min-h-screen bg-gradient-to-br from-pink-50 via-white to-purple-50 dark:from-gray-900 dark:via-gray-800 dark:to-purple-900">\n        \x3c!-- 返回按钮 --\x3e\n        <div class="fixed top-24 left-6 z-30">\n          <button id="back-btn" class="glass-morphism w-12 h-12 rounded-full flex items-center justify-center hover-lift">\n            <span class="text-xl">←</span>\n          </button>\n        </div>\n        \n        \x3c!-- 头部封面区域 --\x3e\n        <header class="relative h-screen flex items-center justify-center overflow-hidden">\n          '.concat(this.renderHeroSection(),'\n        </header>\n        \n        \x3c!-- 内容区域 --\x3e\n        <main class="relative z-10 -mt-20">\n          \x3c!-- 基本信息卡片 --\x3e\n          <section class="container mx-auto px-6 mb-16">\n            ').concat(this.renderBasicInfo(),'\n          </section>\n          \n          \x3c!-- 详细描述 --\x3e\n          <section class="container mx-auto px-6 mb-16">\n            ').concat(this.renderDescription(),"\n          </section>\n          \n          \x3c!-- 图片画廊 --\x3e\n          ").concat((null==(t=this.event.media)?void 0:t.gallery)?'\n            <section class="container mx-auto px-6 mb-16">\n              '.concat(this.renderGallery(),"\n            </section>\n          "):"","\n          \n          \x3c!-- 视频内容 --\x3e\n          ").concat((null==(n=this.event.media)?void 0:n.video)?'\n            <section class="container mx-auto px-6 mb-16">\n              '.concat(this.renderVideo(),"\n            </section>\n          "):"",'\n          \n          \x3c!-- 相关回忆 --\x3e\n          <section class="container mx-auto px-6 mb-16">\n            ').concat(this.renderRelatedEvents(),"\n          </section>\n        </main>\n      </div>\n    "):this.renderNotFound()}renderHeroSection(){var e,n,a,s;const r=this.event,i=t[r.type];return'\n      \x3c!-- 背景图片 --\x3e\n      <div class="absolute inset-0">\n        <img src="'.concat((null==(n=null==(e=r.media)?void 0:e.coverImage)?void 0:n.src)||"/assets/images/default-bg.jpg",'" \n             alt="').concat((null==(s=null==(a=r.media)?void 0:a.coverImage)?void 0:s.alt)||r.title,'"\n             class="w-full h-full object-cover">\n        <div class="absolute inset-0 bg-gradient-to-t from-black/60 via-black/20 to-transparent"></div>\n      </div>\n      \n      \x3c!-- 内容 --\x3e\n      <div class="relative z-10 text-center text-white px-6">\n        <div class="max-w-4xl mx-auto" data-aos="fade-up">\n          \x3c!-- 类型标签 --\x3e\n          <div class="inline-flex items-center glass-morphism px-4 py-2 rounded-full mb-6">\n            <span class="text-2xl mr-2">').concat(i.icon,'</span>\n            <span class="font-medium">').concat(i.name,'</span>\n          </div>\n          \n          \x3c!-- 标题 --\x3e\n          <h1 class="text-4xl lg:text-6xl font-bold mb-6" data-aos="fade-up" data-aos-delay="100">\n            ').concat(r.title,'\n          </h1>\n          \n          \x3c!-- 日期和地点 --\x3e\n          <div class="flex flex-col lg:flex-row items-center justify-center gap-6 text-lg mb-8" data-aos="fade-up" data-aos-delay="200">\n            <div class="flex items-center glass-morphism px-4 py-2 rounded-full">\n              <span class="mr-2">📅</span>\n              <span>').concat(r.dates.displayDate," (").concat(r.dates.lunar||r.dates.gregorian,")</span>\n            </div>\n            ").concat(r.location?'\n              <div class="flex items-center glass-morphism px-4 py-2 rounded-full">\n                <span class="mr-2">📍</span>\n                <span>'.concat(r.location,"</span>\n              </div>\n            "):"","\n            ").concat(r.weather?'\n              <div class="flex items-center glass-morphism px-4 py-2 rounded-full">\n                <span class="mr-2">🌤️</span>\n                <span>'.concat(r.weather,"</span>\n              </div>\n            "):"",'\n          </div>\n          \n          \x3c!-- 简短描述 --\x3e\n          <p class="text-xl lg:text-2xl opacity-90 max-w-3xl mx-auto leading-relaxed" data-aos="fade-up" data-aos-delay="300">\n            ').concat(r.description.short,'\n          </p>\n        </div>\n      </div>\n      \n      \x3c!-- 滚动提示 --\x3e\n      <div class="absolute bottom-8 left-1/2 transform -translate-x-1/2 text-white animate-bounce">\n        <div class="flex flex-col items-center">\n          <span class="text-sm opacity-80 mb-2">滚动查看更多</span>\n          <div class="w-6 h-10 border-2 border-white/50 rounded-full flex justify-center">\n            <div class="w-1 h-3 bg-white/80 rounded-full mt-2"></div>\n          </div>\n        </div>\n      </div>\n    ')}renderBasicInfo(){const e=this.event;return'\n      <div class="glass-morphism rounded-2xl p-8" data-aos="fade-up">\n        <div class="grid lg:grid-cols-3 gap-8">\n          \x3c!-- 核心信息 --\x3e\n          <div class="lg:col-span-2">\n            <h2 class="text-3xl font-bold text-gradient mb-6">'.concat(e.name,'</h2>\n            <div class="grid md:grid-cols-2 gap-6">\n              <div class="space-y-4">\n                <div class="flex items-center">\n                  <span class="w-8 h-8 bg-gradient-to-r ').concat(e.theme.primary,' rounded-full flex items-center justify-center text-white text-sm mr-3">📅</span>\n                  <div>\n                    <div class="font-medium">日期</div>\n                    <div class="text-gray-600 dark:text-gray-400">').concat(e.dates.displayDate,"</div>\n                  </div>\n                </div>\n                \n                ").concat(e.location?'\n                  <div class="flex items-center">\n                    <span class="w-8 h-8 bg-gradient-to-r '.concat(e.theme.primary,' rounded-full flex items-center justify-center text-white text-sm mr-3">📍</span>\n                    <div>\n                      <div class="font-medium">地点</div>\n                      <div class="text-gray-600 dark:text-gray-400">').concat(e.location,"</div>\n                    </div>\n                  </div>\n                "):"","\n                \n                ").concat(e.weather?'\n                  <div class="flex items-center">\n                    <span class="w-8 h-8 bg-gradient-to-r '.concat(e.theme.primary,' rounded-full flex items-center justify-center text-white text-sm mr-3">🌤️</span>\n                    <div>\n                      <div class="font-medium">天气</div>\n                      <div class="text-gray-600 dark:text-gray-400">').concat(e.weather,"</div>\n                    </div>\n                  </div>\n                "):"",'\n              </div>\n              \n              <div class="space-y-4">\n                <div class="flex items-center">\n                  <span class="w-8 h-8 bg-gradient-to-r ').concat(e.theme.primary,' rounded-full flex items-center justify-center text-white text-sm mr-3">⭐</span>\n                  <div>\n                    <div class="font-medium">重要程度</div>\n                    <div class="flex">\n                      ').concat(Array.from({length:5},(t,n)=>'<span class="'.concat(n<e.metadata.significance?"text-yellow-400":"text-gray-300",'"">⭐</span>')).join(""),'\n                    </div>\n                  </div>\n                </div>\n                \n                <div class="flex items-center">\n                  <span class="w-8 h-8 bg-gradient-to-r ').concat(e.theme.primary,' rounded-full flex items-center justify-center text-white text-sm mr-3">😊</span>\n                  <div>\n                    <div class="font-medium">心情</div>\n                    <div class="text-gray-600 dark:text-gray-400">').concat(this.getMoodText(e.metadata.mood),'</div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n          \n          \x3c!-- 标签云 --\x3e\n          <div>\n            <h3 class="text-xl font-bold mb-4">相关标签</h3>\n            <div class="flex flex-wrap gap-2">\n              ').concat(e.metadata.tags.map(t=>'\n                <span class="px-3 py-1 bg-gradient-to-r '.concat(e.theme.secondary,' rounded-full text-sm font-medium">\n                  #').concat(t,"\n                </span>\n              ")).join(""),"\n            </div>\n          </div>\n        </div>\n      </div>\n    ")}renderDescription(){const e=this.event;return'\n      <div class="glass-morphism rounded-2xl p-8" data-aos="fade-up" data-aos-delay="100">\n        <h2 class="text-3xl font-bold text-gradient mb-8">💝 完整故事</h2>\n        \n        <div class="prose prose-lg dark:prose-invert max-w-none">\n          <div class="text-gray-700 dark:text-gray-300 leading-relaxed whitespace-pre-line text-lg">\n            '.concat(e.description.long,"\n          </div>\n        </div>\n        \n        ").concat(e.description.highlights?'\n          <div class="mt-8 p-6 bg-gradient-to-r '.concat(e.theme.secondary,' rounded-xl">\n            <h3 class="text-xl font-bold text-gradient mb-4">✨ 难忘瞬间</h3>\n            <ul class="space-y-3">\n              ').concat(e.description.highlights.map(t=>'\n                <li class="flex items-start">\n                  <span class="w-2 h-2 bg-gradient-to-r '.concat(e.theme.primary,' rounded-full mt-2 mr-3 flex-shrink-0"></span>\n                  <span class="text-gray-700 dark:text-gray-300">').concat(t,"</span>\n                </li>\n              ")).join(""),"\n            </ul>\n          </div>\n        "):"","\n      </div>\n    ")}renderGallery(){var e,t,n,a,s,r;const i=this.event.media.gallery;return'\n      <div class="glass-morphism rounded-2xl p-8" data-aos="fade-up" data-aos-delay="200">\n        <h2 class="text-3xl font-bold text-gradient mb-8 flex items-center">\n          <span class="mr-3">🎨</span>\n          创意画廊\n          <span class="ml-4 text-sm font-normal text-gray-500 bg-gradient-to-r '.concat(this.event.theme.secondary,' px-3 py-1 rounded-full">\n            ').concat(i.length,' 张艺术作品\n          </span>\n        </h2>\n        \n        \x3c!-- 创意瀑布流展示 --\x3e\n        <div class="creative-waterfall-gallery mb-8">\n          \x3c!-- 主视觉焦点区域 --\x3e\n          <div class="hero-showcase mb-8" data-aos="zoom-in">\n            <div class="relative group">\n              \x3c!-- 主图容器 --\x3e\n              <div class="main-focal-image relative overflow-hidden rounded-3xl shadow-2xl transform group-hover:scale-[1.02] transition-all duration-700">\n                <div class="aspect-[21/9] bg-gradient-to-br from-pink-100 to-purple-100 dark:from-gray-800 dark:to-gray-700">\n                  <img src="').concat(null==(e=i[0])?void 0:e.src,'" \n                       alt="').concat(null==(t=i[0])?void 0:t.alt,'"\n                       class="w-full h-full object-cover transition-transform duration-1000 group-hover:scale-110 cursor-pointer"\n                       onclick="openImageModal(\'').concat(null==(n=i[0])?void 0:n.src,"', '").concat(null==(a=i[0])?void 0:a.alt,"', '").concat((null==(s=i[0])?void 0:s.caption)||"",'\')">\n                </div>\n                \n                \x3c!-- 动态光晕效果 --\x3e\n                <div class="absolute inset-0 bg-gradient-to-tr from-transparent via-white/5 to-pink-400/20 opacity-0 group-hover:opacity-100 transition-opacity duration-500"></div>\n                \n                \x3c!-- 焦点图说明 - 始终可见 --\x3e\n                ').concat((null==(r=i[0])?void 0:r.caption)?'\n                  <div class="absolute bottom-0 left-0 right-0 p-6 bg-gradient-to-t from-black/80 via-black/40 to-transparent">\n                    <div class="max-w-3xl mx-auto text-center">\n                      <p class="text-white text-lg font-medium mb-2">'.concat(i[0].caption,'</p>\n                      <div class="flex items-center justify-center space-x-4 text-sm text-white/80">\n                        <span class="flex items-center"><span class="w-1.5 h-1.5 bg-pink-400 rounded-full mr-2"></span>主焦点</span>\n                        <span class="flex items-center"><span class="w-1.5 h-1.5 bg-purple-400 rounded-full mr-2"></span>精选</span>\n                      </div>\n                    </div>\n                  </div>\n                '):"",'\n                \n                \x3c!-- 装饰性标签 --\x3e\n                <div class="absolute top-6 right-6 flex items-center space-x-2">\n                  <div class="px-3 py-1 bg-gradient-to-r ').concat(this.event.theme.primary,' text-white rounded-full text-sm font-medium shadow-lg backdrop-blur-sm">\n                    💎 镇馆之作\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n          \n          \x3c!-- 创意拼贴瀑布流 --\x3e\n          <div class="waterfall-masonry" data-aos="fade-up" data-aos-delay="300">\n            ').concat(this.renderCreativeWaterfall(i.slice(1)),'\n          </div>\n        </div>\n        \n        \x3c!-- 交互式故事轮播 --\x3e\n        <div class="story-carousel mb-6" data-aos="fade-up" data-aos-delay="400">\n          <h3 class="text-lg font-semibold text-gray-700 dark:text-gray-300 mb-4 flex items-center">\n            <span class="mr-2">📖</span>\n            照片故事线\n            <span class="ml-auto text-sm text-gray-500">每张照片都有它的故事</span>\n          </h3>\n          \n          \x3c!-- 横向故事卷轴 --\x3e\n          <div class="swiper story-swiper rounded-2xl overflow-hidden">\n            <div class="swiper-wrapper">\n              ').concat(i.map((e,t)=>'\n                <div class="swiper-slide">\n                  <div class="story-card relative group cursor-pointer gallery-thumb" data-index="'.concat(t,'">\n                    <div class="aspect-[4/3] overflow-hidden bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-700 dark:to-gray-800">\n                      <img src="').concat(e.src,'" \n                           alt="').concat(e.alt,'"\n                           class="w-full h-full object-cover transition-all duration-700 group-hover:scale-110 group-hover:brightness-110">\n                      \n                      \x3c!-- 故事卡片信息层 --\x3e\n                      <div class="absolute inset-0 bg-gradient-to-t from-black/80 via-black/20 to-transparent">\n                        \x3c!-- 始终可见的标题 --\x3e\n                        <div class="absolute bottom-4 left-4 right-4">\n                          <div class="text-white">\n                            <h4 class="font-semibold text-sm mb-1">').concat(e.alt,"</h4>\n                            \x3c!-- 悬停时显示的详细说明 --\x3e\n                            ").concat(e.caption?'<p class="text-xs opacity-0 group-hover:opacity-90 transition-opacity duration-300 line-clamp-2">'.concat(e.caption,"</p>"):"",'\n                          </div>\n                        </div>\n                      </div>\n                      \n                      \x3c!-- 序号标识 --\x3e\n                      <div class="absolute top-3 left-3 w-8 h-8 bg-gradient-to-r ').concat(this.event.theme.primary,' text-white rounded-full flex items-center justify-center text-xs font-bold shadow-lg">\n                        ').concat(t+1,'\n                      </div>\n                      \n                      \x3c!-- 交互提示 --\x3e\n                      <div class="absolute top-3 right-3 w-8 h-8 bg-white/20 backdrop-blur-sm rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300">\n                        <span class="text-white text-xs">👁️</span>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              ')).join(""),'\n            </div>\n            \n            \x3c!-- 故事轮播导航 --\x3e\n            <div class="swiper-button-next story-nav-next !text-pink-500 !text-xl"></div>\n            <div class="swiper-button-prev story-nav-prev !text-pink-500 !text-xl"></div>\n            \n            \x3c!-- 故事进度条 --\x3e\n            <div class="swiper-scrollbar !bg-gray-200 dark:!bg-gray-700 !h-1 !rounded-full !opacity-60">\n              <div class="!bg-gradient-to-r ').concat(this.event.theme.primary,' !rounded-full"></div>\n            </div>\n          </div>\n        </div>\n        \n        \x3c!-- 智能操作面板 --\x3e\n        <div class="smart-gallery-actions p-6 bg-gradient-to-r from-pink-50/80 via-white/50 to-purple-50/80 dark:from-gray-800/80 dark:via-gray-700/50 dark:to-gray-600/80 rounded-2xl backdrop-blur-sm border border-white/20">\n          <div class="flex flex-wrap items-center justify-between gap-6">\n            \x3c!-- 统计信息 --\x3e\n            <div class="flex items-center space-x-6 text-sm">\n              <div class="flex items-center text-gray-600 dark:text-gray-400">\n                <div class="w-3 h-3 bg-gradient-to-r ').concat(this.event.theme.primary,' rounded-full mr-2 animate-pulse"></div>\n                <span class="font-medium">').concat(i.length,'</span>\n                <span class="ml-1">张回忆</span>\n              </div>\n              <div class="flex items-center text-gray-600 dark:text-gray-400">\n                <span class="text-yellow-400 mr-1">✨</span>\n                <span>创意布局</span>\n              </div>\n              <div class="flex items-center text-gray-600 dark:text-gray-400">\n                <span class="text-purple-400 mr-1">🎨</span>\n                <span>艺术展示</span>\n              </div>\n            </div>\n            \n            \x3c!-- 操作按钮组 --\x3e\n            <div class="flex items-center space-x-3">\n              <button class="gallery-shuffle-btn px-4 py-2 bg-gradient-to-r from-purple-400 to-pink-400 text-white rounded-xl text-sm font-medium hover:shadow-lg hover:scale-105 transition-all" onclick="shuffleGallery()">\n                <span class="mr-1">🔀</span>随机排列\n              </button>\n              <button class="gallery-fullscreen-btn px-4 py-2 bg-gradient-to-r ').concat(this.event.theme.primary,' text-white rounded-xl text-sm font-medium hover:shadow-lg hover:scale-105 transition-all" onclick="openGalleryFullscreen()">\n                <span class="mr-1">🔍</span>沉浸模式\n              </button>\n              <button class="gallery-slideshow-btn px-4 py-2 bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 border-2 border-gray-200 dark:border-gray-600 rounded-xl text-sm font-medium hover:shadow-lg hover:scale-105 transition-all" onclick="startSlideshow()">\n                <span class="mr-1">▶️</span>自动播放\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    ')}renderCreativeWaterfall(e){if(0===e.length)return"";const t=[{name:"asymmetric",pattern:"grid-cols-4 grid-rows-3 gap-3",positions:[{span:"col-span-2 row-span-2",aspect:"aspect-[4/3]"},{span:"col-span-1 row-span-1",aspect:"aspect-square"},{span:"col-span-1 row-span-1",aspect:"aspect-square"},{span:"col-span-2 row-span-1",aspect:"aspect-[2/1]"},{span:"col-span-1 row-span-1",aspect:"aspect-[3/4]"},{span:"col-span-1 row-span-1",aspect:"aspect-[3/4]"}]},{name:"magazine",pattern:"grid-cols-6 grid-rows-4 gap-2",positions:[{span:"col-span-3 row-span-3",aspect:"aspect-[3/4]"},{span:"col-span-3 row-span-2",aspect:"aspect-[3/2]"},{span:"col-span-2 row-span-1",aspect:"aspect-[2/1]"},{span:"col-span-1 row-span-1",aspect:"aspect-square"},{span:"col-span-2 row-span-1",aspect:"aspect-[2/1]"},{span:"col-span-1 row-span-1",aspect:"aspect-square"}]},{name:"mondrian",pattern:"grid-cols-5 grid-rows-5 gap-1",positions:[{span:"col-span-2 row-span-3",aspect:"aspect-[2/3]"},{span:"col-span-1 row-span-2",aspect:"aspect-[1/2]"},{span:"col-span-2 row-span-2",aspect:"aspect-square"},{span:"col-span-1 row-span-1",aspect:"aspect-square"},{span:"col-span-2 row-span-2",aspect:"aspect-square"},{span:"col-span-1 row-span-2",aspect:"aspect-[1/2]"}]}],n=t[e.length%t.length];return'\n      <div class="creative-waterfall-container">\n        \x3c!-- 主要艺术网格 --\x3e\n        <div class="art-grid grid '.concat(n.pattern,' mb-6" data-layout="').concat(n.name,'">\n          ').concat(e.slice(0,6).map((e,t)=>{const a=n.positions[t]||n.positions[0],s=150*(t+1);return'\n              <div class="art-piece '.concat(a.span,' group cursor-pointer" \n                   data-aos="fade-up" \n                   data-aos-delay="').concat(s,'"\n                   data-aos-anchor-placement="top-bottom">\n                <div class="relative ').concat(a.aspect,' overflow-hidden rounded-xl bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-700 dark:to-gray-800 shadow-lg group-hover:shadow-2xl transition-all duration-500 group-hover:scale-[1.02] group-hover:-rotate-1">\n                  <img src="').concat(e.src,'" \n                       alt="').concat(e.alt,'"\n                       class="w-full h-full object-cover transition-all duration-700 group-hover:scale-110 group-hover:brightness-110"\n                       onclick="openImageModal(\'').concat(e.src,"', '").concat(e.alt,"', '").concat(e.caption||"",'\')">\n                  \n                  \x3c!-- 艺术滤镜效果 --\x3e\n                  <div class="absolute inset-0 bg-gradient-to-br from-transparent via-black/5 to-black/20 opacity-0 group-hover:opacity-100 transition-opacity duration-500"></div>\n                  \n                  \x3c!-- 创意信息显示层 --\x3e\n                  <div class="absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent">\n                    \x3c!-- 文字信息区域 --\x3e\n                    <div class="absolute bottom-0 left-0 right-0 p-4">\n                      <div class="text-white transform transition-all duration-300">\n                        <h4 class="font-semibold text-sm mb-1 opacity-90 group-hover:opacity-100">').concat(e.alt,"</h4>\n                        ").concat(e.caption?'<p class="text-xs opacity-0 group-hover:opacity-90 transition-opacity duration-300 line-clamp-2">'.concat(e.caption,"</p>"):"",'\n                        <div class="flex items-center mt-2 text-xs opacity-60 group-hover:opacity-75 transition-opacity duration-300">\n                          <span class="w-1.5 h-1.5 bg-pink-400 rounded-full mr-2"></span>\n                          第 ').concat(t+2,' 幅作品\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                  \n                  \x3c!-- 装饰性几何边框 --\x3e\n                  <div class="absolute inset-0 border-2 border-white/30 rounded-xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>\n                  \n                  \x3c!-- 创意标签 --\x3e\n                  <div class="absolute top-3 right-3 flex items-center space-x-1">\n                    <div class="w-6 h-6 bg-gradient-to-r ').concat(this.event.theme.primary,' text-white rounded-full flex items-center justify-center text-xs font-bold shadow-lg">\n                      ').concat(t+2,'\n                    </div>\n                    <div class="w-6 h-6 bg-white/20 backdrop-blur-sm rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300">\n                      <span class="text-white text-xs">🎨</span>\n                    </div>\n                  </div>\n                  \n                  \x3c!-- 互动光标提示 --\x3e\n                  <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-12 h-12 bg-white/20 backdrop-blur-sm rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-all duration-300 scale-75 group-hover:scale-100">\n                    <span class="text-white text-lg">👁️</span>\n                  </div>\n                </div>\n              </div>\n            ')}).join(""),"\n        </div>\n        \n        \x3c!-- 溢出图片的极简展示 --\x3e\n        ").concat(e.length>6?'\n          <div class="overflow-gallery mt-8" data-aos="fade-up" data-aos-delay="700">\n            <h4 class="text-md font-semibold text-gray-700 dark:text-gray-300 mb-4 flex items-center">\n              <span class="mr-2">✨</span>\n              更多精彩瞬间 ('.concat(e.length-6,' 张)\n              <span class="ml-auto text-sm text-gray-500">简约展示</span>\n            </h4>\n            \n            <div class="grid grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-3">\n              ').concat(e.slice(6).map((e,t)=>'\n                <div class="overflow-item group cursor-pointer" data-aos="zoom-in" data-aos-delay="'.concat(100*(t+1),'">\n                  <div class="relative aspect-square overflow-hidden rounded-lg bg-gray-100 dark:bg-gray-800 shadow-md group-hover:shadow-lg transition-all duration-300 group-hover:scale-105">\n                    <img src="').concat(e.src,'" \n                         alt="').concat(e.alt,'"\n                         class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"\n                         onclick="openImageModal(\'').concat(e.src,"', '").concat(e.alt,"', '").concat(e.caption||"",'\')">\n                    \n                    \x3c!-- 简约遮罩 --\x3e\n                    <div class="absolute inset-0 bg-black/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-center justify-center">\n                      <div class="w-6 h-6 bg-white/80 rounded-full flex items-center justify-center">\n                        <span class="text-gray-700 text-xs">🔍</span>\n                      </div>\n                    </div>\n                    \n                    \x3c!-- 序号 --\x3e\n                    <div class="absolute bottom-1 right-1 w-5 h-5 bg-gradient-to-r ').concat(this.event.theme.primary,' text-white rounded-full flex items-center justify-center text-xs font-bold">\n                      ').concat(t+7,"\n                    </div>\n                  </div>\n                </div>\n              ")).join(""),"\n            </div>\n          </div>\n        "):"",'\n        \n        \x3c!-- 布局切换提示 --\x3e\n        <div class="layout-info mt-6 text-center" data-aos="fade-up" data-aos-delay="800">\n          <div class="inline-flex items-center px-4 py-2 bg-gradient-to-r from-pink-100 to-purple-100 dark:from-gray-700 dark:to-gray-600 rounded-full text-sm text-gray-600 dark:text-gray-400">\n            <span class="mr-2">🎨</span>\n            当前布局: ').concat("asymmetric"===n.name?"不对称艺术":"magazine"===n.name?"杂志风格":"蒙德里安",'\n            <span class="ml-2 text-xs opacity-75">刷新页面体验不同布局</span>\n          </div>\n        </div>\n      </div>\n    ')}renderMosaicGrid(e){if(0===e.length)return"";const t=[{pattern:"grid-cols-2",sizes:["aspect-square","aspect-[4/3]"]},{pattern:"grid-cols-3",sizes:["aspect-[3/4]","aspect-square","aspect-[4/3]"]},{pattern:"grid-cols-2 grid-rows-2",sizes:["aspect-square","aspect-[4/3]","aspect-[3/4]","aspect-square"]}],n=t[Math.min(e.length-1,t.length-1)];return'\n      <div class="mosaic-container grid '.concat(n.pattern,' gap-4" data-aos="fade-up" data-aos-delay="400">\n        ').concat(e.slice(0,4).map((e,t)=>{const a=n.sizes[t]||"aspect-square";return'\n            <div class="mosaic-item group cursor-pointer" data-aos="flip-left" data-aos-delay="'.concat(100*(t+1),'">\n              <div class="relative ').concat(a,' rounded-xl overflow-hidden shadow-lg transform group-hover:scale-105 group-hover:rotate-1 transition-all duration-500">\n                <img src="').concat(e.src,'" \n                     alt="').concat(e.alt,'"\n                     class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-110"\n                     onclick="openImageModal(\'').concat(e.src,"', '").concat(e.alt,"', '").concat(e.caption||"",'\')">\n                \n                \x3c!-- 创意遮罩效果 --\x3e\n                <div class="absolute inset-0 bg-gradient-to-br from-transparent via-black/10 to-black/30 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>\n                \n                \x3c!-- 图片信息浮层 --\x3e\n                ').concat(e.caption?'\n                  <div class="absolute bottom-0 left-0 right-0 p-3 bg-gradient-to-t from-black/70 to-transparent transform translate-y-full group-hover:translate-y-0 transition-transform duration-300">\n                    <p class="text-white text-sm font-medium line-clamp-2">'.concat(e.caption,"</p>\n                  </div>\n                "):"",'\n                \n                \x3c!-- 装饰性边框 --\x3e\n                <div class="absolute inset-0 border-2 border-white/20 rounded-xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>\n                \n                \x3c!-- 图片标签 --\x3e\n                <div class="absolute top-2 right-2 bg-white/90 dark:bg-gray-800/90 px-2 py-1 rounded-full text-xs font-medium text-gray-700 dark:text-gray-300">\n                  ').concat(t+2,"\n                </div>\n              </div>\n            </div>\n          ")}).join(""),"\n        \n        \x3c!-- 更多图片提示 --\x3e\n        ").concat(e.length>4?'\n          <div class="more-images-hint col-span-full mt-4 text-center" data-aos="fade-up" data-aos-delay="600">\n            <div class="inline-flex items-center px-4 py-2 bg-gradient-to-r '.concat(this.event.theme.secondary,' rounded-full text-sm text-gray-600 dark:text-gray-400">\n              <span class="mr-2">✨</span>\n              还有 ').concat(e.length-4,' 张照片在缩略图中\n              <span class="ml-2">👇</span>\n            </div>\n          </div>\n        '):"","\n      </div>\n    ")}renderVideo(){const e=this.event.media.video;return'\n      <div class="glass-morphism rounded-2xl p-8" data-aos="fade-up" data-aos-delay="300">\n        <h2 class="text-3xl font-bold text-gradient mb-8">🎬 珍贵视频</h2>\n        \n        <div class="aspect-video bg-gray-100 dark:bg-gray-800 rounded-xl overflow-hidden">\n          <video controls \n                 poster="'.concat(e.poster,'"\n                 class="w-full h-full object-cover">\n            <source src="').concat(e.src,'" type="video/mp4">\n            您的浏览器不支持视频播放。\n          </video>\n        </div>\n        \n        ').concat(e.caption?'\n          <p class="text-center text-gray-600 dark:text-gray-400 mt-4 italic">'.concat(e.caption,"</p>\n        "):"","\n      </div>\n    ")}renderRelatedEvents(){const t=e.filter(e=>e.id!==this.eventId&&e.type===this.event.type).slice(0,3);return 0===t.length?"":'\n      <div class="glass-morphism rounded-2xl p-8" data-aos="fade-up" data-aos-delay="400">\n        <h2 class="text-3xl font-bold text-gradient mb-8">🔗 相关回忆</h2>\n        \n        <div class="grid md:grid-cols-3 gap-6">\n          '.concat(t.map(e=>{var t,n,a,s;return'\n            <a href="/event/'.concat(e.id,'" class="block group">\n              <div class="glass-morphism rounded-xl overflow-hidden hover-lift">\n                <div class="aspect-video bg-gray-100 dark:bg-gray-800">\n                  <img src="').concat((null==(n=null==(t=e.media)?void 0:t.coverImage)?void 0:n.src)||"/assets/images/default-cover.jpg",'" \n                       alt="').concat((null==(s=null==(a=e.media)?void 0:a.coverImage)?void 0:s.alt)||e.title,'"\n                       class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-300">\n                </div>\n                <div class="p-4">\n                  <h3 class="font-bold text-gradient mb-2">').concat(e.title,'</h3>\n                  <p class="text-sm text-gray-600 dark:text-gray-400 mb-2">').concat(e.dates.displayDate,'</p>\n                  <p class="text-sm text-gray-700 dark:text-gray-300 line-clamp-2">').concat(e.description.short,"</p>\n                </div>\n              </div>\n            </a>\n          ")}).join(""),"\n        </div>\n      </div>\n    ")}renderNotFound(){return'\n      <div class="min-h-screen flex items-center justify-center bg-gradient-to-br from-pink-50 via-white to-purple-50 dark:from-gray-900 dark:via-gray-800 dark:to-purple-900">\n        <div class="text-center">\n          <div class="text-8xl mb-6">😢</div>\n          <h1 class="text-4xl font-bold text-gradient mb-4">回忆未找到</h1>\n          <p class="text-gray-600 dark:text-gray-400 mb-8">抱歉，我们找不到您要查看的回忆。</p>\n          <a href="/timeline" class="btn-primary inline-flex items-center">\n            返回时光轴\n          </a>\n        </div>\n      </div>\n    '}getMoodText(e){return{joyful:"😄 快乐",romantic:"💕 浪漫",peaceful:"😌 平静",excited:"🤩 兴奋",nostalgic:"😊 怀念"}[e]||"😊 美好"}async mount(){window.AOS&&window.AOS.refresh();const e=document.getElementById("back-btn");e&&e.addEventListener("click",()=>{window.history.back()}),this.initSwiper(),this.bindThumbnailEvents(),window.openImageModal=this.openImageModal.bind(this),window.shuffleGallery=this.shuffleGallery.bind(this),window.openGalleryFullscreen=this.openGalleryFullscreen.bind(this),window.startSlideshow=this.startSlideshow.bind(this)}initSwiper(){void 0!==window.Swiper&&document.querySelector(".story-swiper")&&(this.storySwiperInstance=new window.Swiper(".story-swiper",{slidesPerView:1,spaceBetween:20,loop:!0,autoplay:{delay:5e3,disableOnInteraction:!1,pauseOnMouseEnter:!0},pagination:{el:".swiper-pagination",clickable:!0,dynamicBullets:!0},navigation:{nextEl:".story-nav-next",prevEl:".story-nav-prev"},scrollbar:{el:".swiper-scrollbar",draggable:!0,dragSize:50},keyboard:{enabled:!0},effect:"coverflow",coverflowEffect:{rotate:20,stretch:0,depth:100,modifier:1,slideShadows:!0},breakpoints:{640:{slidesPerView:2,spaceBetween:15},768:{slidesPerView:3,spaceBetween:20},1024:{slidesPerView:4,spaceBetween:25},1280:{slidesPerView:5,spaceBetween:30}},preloadImages:!1,lazy:{loadPrevNext:!0,loadPrevNextAmount:2},on:{slideChange:function(){const e=this.realIndex;document.querySelectorAll(".story-card").forEach((t,n)=>{n===e?(t.classList.add("active"),t.style.transform="scale(1.05)",t.style.zIndex="20"):(t.classList.remove("active"),t.style.transform="scale(1)",t.style.zIndex="1")})},transitionStart:function(){this.slides.forEach(e=>{const t=e.querySelector("img");t&&(t.style.filter="brightness(0.8) contrast(1.1)")})},transitionEnd:function(){this.slides.forEach(e=>{const t=e.querySelector("img");t&&(t.style.filter="brightness(1) contrast(1)")})}}})),void 0!==window.Swiper&&document.querySelector(".gallery-swiper")&&(this.swiperInstance=new window.Swiper(".gallery-swiper",{loop:!0,autoplay:{delay:6e3,disableOnInteraction:!1,pauseOnMouseEnter:!0},pagination:{el:".swiper-pagination",clickable:!0,bulletClass:"swiper-pagination-bullet",bulletActiveClass:"swiper-pagination-bullet-active",renderBullet:function(e,t){return'<span class="'+t+' !bg-pink-400 !w-3 !h-3 !opacity-60 hover:!opacity-100 !transition-all"></span>'}},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},keyboard:{enabled:!0},effect:"fade",fadeEffect:{crossFade:!0},touchRatio:1,touchAngle:45,grabCursor:!0,preloadImages:!1,lazy:{loadPrevNext:!0},breakpoints:{640:{touchRatio:1.5},768:{touchRatio:1.2}},on:{slideChange:function(){const e=this.realIndex;document.querySelectorAll(".gallery-thumb").forEach((t,n)=>{n===e?(t.classList.add("active"),t.style.transform="scale(1.1)",t.style.zIndex="10"):(t.classList.remove("active"),t.style.transform="scale(1)",t.style.zIndex="1")})}}}))}bindThumbnailEvents(){document.querySelectorAll(".gallery-thumb").forEach((e,t)=>{e.addEventListener("click",()=>{const n=parseInt(e.dataset.index);this.swiperInstance&&this.swiperInstance.slideTo(n),e.style.transform="scale(0.95)",setTimeout(()=>{e.style.transform="scale(1.1)"},150),document.querySelectorAll(".gallery-thumb").forEach((e,n)=>{n===t?(e.classList.add("active"),e.style.zIndex="10"):(e.classList.remove("active"),e.style.transform="scale(1)",e.style.zIndex="1")}),navigator.vibrate&&navigator.vibrate(50)}),e.addEventListener("mouseenter",()=>{e.classList.contains("active")||(e.style.transform="scale(1.05)")}),e.addEventListener("mouseleave",()=>{e.classList.contains("active")||(e.style.transform="scale(1)")})});const e=document.querySelector(".gallery-thumb");e&&(e.classList.add("active"),e.style.transform="scale(1.1)",e.style.zIndex="10")}openImageModal(e,t,n){const a=document.createElement("div");a.className="fixed inset-0 bg-black/90 backdrop-blur-sm z-50 flex items-center justify-center p-4",a.innerHTML='\n      <div class="relative max-w-6xl max-h-full">\n        <img src="'.concat(e,'" alt="').concat(t,'" class="max-w-full max-h-full object-contain rounded-lg">\n        <button class="absolute top-4 right-4 w-12 h-12 bg-white/20 backdrop-blur-sm rounded-full flex items-center justify-center text-white hover:bg-white/30 transition-colors text-xl">\n          ✕\n        </button>\n        ').concat(n?'\n          <div class="absolute bottom-4 left-4 right-4 text-center">\n            <p class="text-white bg-black/50 backdrop-blur-sm rounded-lg px-6 py-3 inline-block max-w-lg">'.concat(n,"</p>\n          </div>\n        "):"","\n      </div>\n    "),a.addEventListener("click",e=>{e.target!==a&&"✕"!==e.target.textContent||document.body.removeChild(a)}),document.body.appendChild(a)}shuffleGallery(){const e=document.querySelector(".art-grid");if(!e)return;Array.from(e.querySelectorAll(".art-piece"));const t=["asymmetric","magazine","mondrian"],n=e.getAttribute("data-layout"),a=t[(t.indexOf(n)+1)%t.length];e.style.opacity="0.3",e.style.transform="scale(0.95)",setTimeout(()=>{e.setAttribute("data-layout",a);e.className="art-grid grid ".concat({asymmetric:"grid-cols-4 grid-rows-3 gap-3",magazine:"grid-cols-6 grid-rows-4 gap-2",mondrian:"grid-cols-5 grid-rows-5 gap-1"}[a]),e.setAttribute("data-layout",a),e.style.opacity="1",e.style.transform="scale(1)";const t=document.querySelector(".layout-info div span");if(t){const e={asymmetric:"不对称艺术",magazine:"杂志风格",mondrian:"蒙德里安"};t.textContent="当前布局: ".concat(e[a])}},300)}openGalleryFullscreen(){const e=this.event.media.gallery;if(!e||0===e.length)return;const t=document.createElement("div");t.className="fixed inset-0 bg-black z-50 flex items-center justify-center",t.innerHTML='\n      <div class="relative w-full h-full">\n        \x3c!-- 全屏 Swiper --\x3e\n        <div class="swiper fullscreen-swiper w-full h-full">\n          <div class="swiper-wrapper">\n            '.concat(e.map((e,t)=>'\n              <div class="swiper-slide flex items-center justify-center">\n                <div class="relative max-w-full max-h-full">\n                  <img src="'.concat(e.src,'" \n                       alt="').concat(e.alt,'"\n                       class="max-w-full max-h-full object-contain">\n                  ').concat(e.caption?'\n                    <div class="absolute bottom-4 left-4 right-4 text-center">\n                      <p class="text-white bg-black/50 backdrop-blur-sm rounded-lg px-6 py-3 inline-block max-w-lg">'.concat(e.caption,"</p>\n                    </div>\n                  "):"","\n                </div>\n              </div>\n            ")).join(""),'\n          </div>\n          \n          \x3c!-- 全屏导航 --\x3e\n          <div class="swiper-button-next !text-white !text-2xl"></div>\n          <div class="swiper-button-prev !text-white !text-2xl"></div>\n          \n          \x3c!-- 全屏分页器 --\x3e\n          <div class="swiper-pagination !bottom-8"></div>\n        </div>\n        \n        \x3c!-- 关闭按钮 --\x3e\n        <button class="absolute top-6 right-6 w-12 h-12 bg-white/20 backdrop-blur-sm rounded-full flex items-center justify-center text-white hover:bg-white/30 transition-colors text-xl z-10 fullscreen-close">\n          ✕\n        </button>\n        \n        \x3c!-- 信息面板 --\x3e\n        <div class="absolute top-6 left-6 bg-black/50 backdrop-blur-sm rounded-lg px-4 py-2 text-white z-10">\n          <div class="flex items-center space-x-4 text-sm">\n            <span>🎨 创意画廊</span>\n            <span>📷 ').concat(e.length," 张</span>\n            <span>🔍 沉浸模式</span>\n          </div>\n        </div>\n      </div>\n    ");t.querySelector(".fullscreen-close").addEventListener("click",()=>{document.body.removeChild(t)}),t.addEventListener("click",e=>{e.target===t&&document.body.removeChild(t)}),document.body.appendChild(t),void 0!==window.Swiper&&new window.Swiper(".fullscreen-swiper",{loop:!0,keyboard:{enabled:!0},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},pagination:{el:".swiper-pagination",clickable:!0,renderBullet:function(e,t){return'<span class="'+t+' !bg-white !w-3 !h-3 !opacity-60 hover:!opacity-100 !transition-all"></span>'}},effect:"fade",fadeEffect:{crossFade:!0}})}startSlideshow(){const e=this.event.media.gallery;if(!e||0===e.length)return;let t=0;const n=document.createElement("div");n.className="fixed inset-0 bg-black z-50 flex items-center justify-center";const a=()=>{const a=e[t];n.innerHTML='\n        <div class="relative w-full h-full flex items-center justify-center">\n          <img src="'.concat(a.src,'" \n               alt="').concat(a.alt,'"\n               class="max-w-full max-h-full object-contain transition-opacity duration-1000">\n          \n          ').concat(a.caption?'\n            <div class="absolute bottom-8 left-8 right-8 text-center">\n              <p class="text-white text-lg bg-black/50 backdrop-blur-sm rounded-lg px-6 py-4 inline-block max-w-2xl">'.concat(a.caption,"</p>\n            </div>\n          "):"",'\n          \n          \x3c!-- 控制面板 --\x3e\n          <div class="absolute top-6 left-6 right-6 flex items-center justify-between">\n            <div class="bg-black/50 backdrop-blur-sm rounded-lg px-4 py-2 text-white">\n              <div class="flex items-center space-x-4 text-sm">\n                <span>▶️ 幻灯片</span>\n                <span>').concat(t+1," / ").concat(e.length,'</span>\n                <span class="slideshow-timer">●</span>\n              </div>\n            </div>\n            \n            <div class="flex items-center space-x-2">\n              <button class="slideshow-pause w-10 h-10 bg-white/20 backdrop-blur-sm rounded-full flex items-center justify-center text-white hover:bg-white/30 transition-colors">\n                ⏸️\n              </button>\n              <button class="slideshow-close w-10 h-10 bg-white/20 backdrop-blur-sm rounded-full flex items-center justify-center text-white hover:bg-white/30 transition-colors">\n                ✕\n              </button>\n            </div>\n          </div>\n          \n          \x3c!-- 进度条 --\x3e\n          <div class="absolute bottom-4 left-8 right-8">\n            <div class="w-full h-1 bg-white/20 rounded-full overflow-hidden">\n              <div class="slideshow-progress h-full bg-gradient-to-r from-pink-400 to-purple-400 rounded-full transition-all duration-[4000ms] ease-linear" style="width: 0%"></div>\n            </div>\n          </div>\n        </div>\n      ')};let s,r=!0;const i=()=>{s&&clearInterval(s),s=setInterval(()=>{r&&(t=(t+1)%e.length,a(),o())},4e3)},o=()=>{const e=n.querySelector(".slideshow-pause"),t=n.querySelector(".slideshow-close"),a=n.querySelector(".slideshow-progress"),o=n.querySelector(".slideshow-timer");e&&e.addEventListener("click",()=>{r=!r,e.textContent=r?"⏸️":"▶️",o.textContent=r?"●":"⏸️",r?i():clearInterval(s)}),t&&t.addEventListener("click",()=>{clearInterval(s),document.body.removeChild(n)}),a&&r&&(a.style.width="0%",setTimeout(()=>{a.style.width="100%"},100))},l=i=>{switch(i.key){case"Escape":clearInterval(s),document.body.removeChild(n),document.removeEventListener("keydown",l);break;case" ":i.preventDefault(),r=!r,n.querySelector(".slideshow-pause").click();break;case"ArrowLeft":t=(t-1+e.length)%e.length,a(),o();break;case"ArrowRight":t=(t+1)%e.length,a(),o()}};document.addEventListener("keydown",l),document.body.appendChild(n),a(),o(),i()}}export{n as default};
