/**
 * 主样式文件 - 爱情纪念网站 2.0
 * 
 * 包含玻璃拟态效果、主题切换系统、高级动画和现代化设计
 * 
 * @version 2.0
 * @author Love Memorial Team
 */

@import 'tailwindcss/base';
@import 'tailwindcss/components';
@import 'tailwindcss/utilities';

/* ===== Google Fonts 导入 ===== */
@import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700;800;900&family=Dancing+Script:wght@400;500;600;700&family=Inter:wght@300;400;500;600;700;800&family=Noto+Sans+SC:wght@300;400;500;600;700;800&display=swap');

/* ===== 自定义组件层 ===== */
@layer components {
  .hover-lift {
    @apply transition-all duration-300 ease-out;
  }
  
  .hover-lift:hover {
    @apply transform -translate-y-1 shadow-lg;
  }
  
  .btn-primary {
    @apply px-6 py-3 bg-gradient-to-r from-pink-500 to-purple-500 text-white font-medium rounded-lg transition-all duration-300 hover:shadow-lg hover:scale-105;
  }
  
  .nav-link {
    @apply text-gray-700 dark:text-gray-300 hover:text-pink-500 dark:hover:text-pink-400 font-medium transition-colors duration-200;
  }
  
  .text-gradient {
    @apply bg-gradient-to-r from-pink-500 to-purple-500 bg-clip-text text-transparent;
  }
}

/* ===== CSS 变量定义 ===== */
:root {
  /* 暖调浪漫主题 */
  --warm-bg-primary: #fff1f2;
  --warm-bg-secondary: #ffe4e6;
  --warm-bg-tertiary: #fecaca;
  --warm-text-primary: #881337;
  --warm-text-secondary: #701a75;
  --warm-text-accent: #fda4af;
  --warm-glass: rgba(255, 255, 255, 0.25);
  --warm-glass-border: rgba(255, 255, 255, 0.18);
  
  /* 深色奢华主题 */
  --dark-bg-primary: #0f172a;
  --dark-bg-secondary: #1e293b;
  --dark-bg-tertiary: #334155;
  --dark-text-primary: #e2e8f0;
  --dark-text-secondary: #cbd5e1;
  --dark-text-accent: #fda4af;
  --dark-glass: rgba(30, 41, 59, 0.4);
  --dark-glass-border: rgba(148, 163, 184, 0.18);
  
  /* 动画时长 */
  --duration-fast: 0.2s;
  --duration-normal: 0.3s;
  --duration-slow: 0.5s;
  --duration-slowest: 0.8s;
  
  /* 缓动函数 */
  --ease-smooth: cubic-bezier(0.25, 0.46, 0.45, 0.94);
  --ease-bounce: cubic-bezier(0.68, -0.55, 0.265, 1.55);
  --ease-elastic: cubic-bezier(0.175, 0.885, 0.32, 1.275);
  
  /* Z-index 层级 */
  --z-background: -1;
  --z-base: 0;
  --z-content: 10;
  --z-nav: 50;
  --z-modal: 100;
  --z-tooltip: 200;
}

/* ===== 基础样式重置 ===== */
* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

html {
  scroll-behavior: smooth;
  scroll-padding-top: 80px;
}

body {
  font-family: 'Inter', 'Noto Sans SC', sans-serif;
  line-height: 1.6;
  overflow-x: hidden;
  transition: all var(--duration-normal) var(--ease-smooth);
}

/* ===== 主题切换 ===== */
.theme-warm {
  background: linear-gradient(135deg, var(--warm-bg-primary) 0%, var(--warm-bg-secondary) 50%, var(--warm-bg-tertiary) 100%);
  color: var(--warm-text-primary);
}

.theme-dark {
  background: linear-gradient(135deg, var(--dark-bg-primary) 0%, var(--dark-bg-secondary) 50%, var(--dark-bg-tertiary) 100%);
  color: var(--dark-text-primary);
}

/* ===== 玻璃拟态效果 ===== */
.glass-morphism {
  backdrop-filter: blur(16px);
  -webkit-backdrop-filter: blur(16px);
  border-radius: 20px;
  border: 1px solid rgba(255, 255, 255, 0.18);
  box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
  transition: all var(--duration-normal) var(--ease-smooth);
}

.theme-warm .glass-morphism {
  background: var(--warm-glass);
  border-color: var(--warm-glass-border);
}

.theme-dark .glass-morphism {
  background: var(--dark-glass);
  border-color: var(--dark-glass-border);
  box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
}

.glass-morphism:hover {
  transform: translateY(-2px);
  box-shadow: 0 12px 40px 0 rgba(31, 38, 135, 0.5);
}

.theme-dark .glass-morphism:hover {
  box-shadow: 0 12px 40px 0 rgba(0, 0, 0, 0.5);
}

/* ===== 新拟态效果 ===== */
.neumorphism {
  border-radius: 20px;
  transition: all var(--duration-normal) var(--ease-smooth);
}

.theme-warm .neumorphism {
  background: var(--warm-bg-primary);
  box-shadow: 20px 20px 60px #d1d5db, -20px -20px 60px #ffffff;
}

.theme-dark .neumorphism {
  background: var(--dark-bg-secondary);
  box-shadow: 20px 20px 60px var(--dark-bg-primary), -20px -20px 60px var(--dark-bg-tertiary);
}

/* ===== 高级动画效果 ===== */
@keyframes float {
  0%, 100% { transform: translateY(0px) rotate(0deg); }
  25% { transform: translateY(-10px) rotate(1deg); }
  50% { transform: translateY(-20px) rotate(0deg); }
  75% { transform: translateY(-10px) rotate(-1deg); }
}

@keyframes pulse-glow {
  0%, 100% { 
    box-shadow: 0 0 20px rgba(236, 72, 153, 0.5);
    transform: scale(1);
  }
  50% { 
    box-shadow: 0 0 40px rgba(236, 72, 153, 0.8);
    transform: scale(1.02);
  }
}

@keyframes shimmer {
  0% { transform: translateX(-100%); }
  100% { transform: translateX(100%); }
}

@keyframes particle-float {
  0% { 
    transform: translateY(100vh) translateX(0px) rotate(0deg);
    opacity: 0;
  }
  10% { opacity: 1; }
  90% { opacity: 1; }
  100% { 
    transform: translateY(-100vh) translateX(100px) rotate(360deg);
    opacity: 0;
  }
}

@keyframes ripple {
  0% {
    transform: scale(0);
    opacity: 1;
  }
  100% {
    transform: scale(4);
    opacity: 0;
  }
}

@keyframes gradient-shift {
  0%, 100% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
}

@keyframes text-reveal {
  0% {
    opacity: 0;
    transform: translateY(30px) rotateX(90deg);
  }
  100% {
    opacity: 1;
    transform: translateY(0) rotateX(0deg);
  }
}

/* ===== 自定义动画类 ===== */
.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 3s ease-in-out infinite;
}

.animate-particle {
  animation: particle-float 15s linear infinite;
}

.animate-gradient {
  background: linear-gradient(-45deg, #ff6b6b, #4ecdc4, #45b7d1, #96ceb4, #ffeaa7);
  background-size: 400% 400%;
  animation: gradient-shift 8s ease infinite;
}

.animate-text-reveal {
  animation: text-reveal 0.8s var(--ease-bounce) forwards;
}

/* ===== 粒子背景效果 ===== */
.particles-container {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: var(--z-background);
  overflow: hidden;
}

.particle {
  position: absolute;
  width: 4px;
  height: 4px;
  background: radial-gradient(circle, rgba(236, 72, 153, 0.8) 0%, transparent 70%);
  border-radius: 50%;
  animation: particle-float 20s linear infinite;
}

.particle:nth-child(2n) {
  background: radial-gradient(circle, rgba(245, 158, 11, 0.6) 0%, transparent 70%);
  animation-duration: 25s;
  animation-delay: -5s;
}

.particle:nth-child(3n) {
  background: radial-gradient(circle, rgba(168, 85, 247, 0.4) 0%, transparent 70%);
  animation-duration: 30s;
  animation-delay: -10s;
}

/* ===== 高级按钮样式 ===== */
.btn-glass {
  @apply relative overflow-hidden px-8 py-4 rounded-2xl font-medium transition-all duration-300 ease-in-out;
  backdrop-filter: blur(16px);
  -webkit-backdrop-filter: blur(16px);
  border: 1px solid rgba(255, 255, 255, 0.2);
}

.btn-glass::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
  transition: left var(--duration-slow) var(--ease-smooth);
}

.btn-glass:hover::before {
  left: 100%;
}

.btn-glass:hover {
  transform: translateY(-2px);
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
}

.btn-primary {
  @apply btn-glass text-white;
  background: linear-gradient(135deg, rgba(236, 72, 153, 0.8), rgba(245, 158, 11, 0.8));
}

.btn-secondary {
  @apply btn-glass;
  background: rgba(255, 255, 255, 0.1);
}

.theme-warm .btn-secondary {
  color: var(--warm-text-primary);
  background: rgba(255, 255, 255, 0.2);
}

.theme-dark .btn-secondary {
  color: var(--dark-text-primary);
  background: rgba(30, 41, 59, 0.3);
}

/* ===== 卡片样式 ===== */
.card-glass {
  @apply glass-morphism p-6 transition-all duration-500 ease-in-out;
}

.card-glass:hover {
  transform: translateY(-8px) scale(1.02);
}

.card-neumorphism {
  @apply neumorphism p-6 transition-all duration-500 ease-in-out;
}

.card-neumorphism:hover {
  transform: translateY(-4px);
}

.theme-warm .card-neumorphism:hover {
  box-shadow: 25px 25px 75px #c1c5ca, -25px -25px 75px #ffffff;
}

.theme-dark .card-neumorphism:hover {
  box-shadow: 25px 25px 75px var(--dark-bg-primary), -25px -25px 75px var(--dark-bg-tertiary);
}

/* ===== 导航栏样式 ===== */
.navbar {
  @apply fixed top-0 w-full z-50 glass-morphism;
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  transition: all var(--duration-normal) var(--ease-smooth);
}

.navbar.scrolled {
  @apply shadow-lg;
  backdrop-filter: blur(24px);
  -webkit-backdrop-filter: blur(24px);
}

/* ===== 文字样式 ===== */
.text-gradient {
  background: linear-gradient(135deg, #ec4899, #f59e0b, #8b5cf6);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  animation: gradient-shift 6s ease infinite;
  background-size: 200% 200%;
}

.text-shadow-soft {
  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.text-shadow-strong {
  text-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
}

/* ===== 加载动画 ===== */
.loading-container {
  @apply flex items-center justify-center min-h-screen;
}

.loading-heart {
  width: 60px;
  height: 60px;
  position: relative;
}

.loading-heart::before,
.loading-heart::after {
  content: '';
  width: 26px;
  height: 40px;
  position: absolute;
  left: 50px;
  top: 0;
  transform-origin: 0 100%;
  border-radius: 26px 26px 0 0;
  background: linear-gradient(135deg, #ec4899, #f59e0b);
  animation: heartbeat 1.5s ease-in-out infinite;
}

.loading-heart::after {
  left: 26px;
  transform: rotate(-45deg);
  transform-origin: 100% 100%;
}

.loading-heart::before {
  transform: rotate(45deg);
}

@keyframes heartbeat {
  0%, 100% { transform: scale(1) rotate(45deg); }
  50% { transform: scale(1.1) rotate(45deg); }
}

/* ===== 滚动条样式 ===== */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.1);
  border-radius: 10px;
}

::-webkit-scrollbar-thumb {
  background: linear-gradient(45deg, rgba(236, 72, 153, 0.6), rgba(245, 158, 11, 0.6));
  border-radius: 10px;
  transition: background var(--duration-normal) var(--ease-smooth);
}

::-webkit-scrollbar-thumb:hover {
  background: linear-gradient(45deg, rgba(236, 72, 153, 0.8), rgba(245, 158, 11, 0.8));
}

/* ===== 响应式设计 ===== */
@media (max-width: 768px) {
  .glass-morphism {
    border-radius: 16px;
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
  }
  
  .btn-glass {
    @apply px-6 py-3 text-sm;
  }
  
  .card-glass,
  .card-neumorphism {
    @apply p-4;
  }
  
  html {
    scroll-padding-top: 60px;
  }
}

@media (max-width: 480px) {
  .glass-morphism {
    border-radius: 12px;
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
  }
  
  .particle {
    width: 2px;
    height: 2px;
  }
}

/* ===== 打印样式 ===== */
@media print {
  .navbar,
  .particles-container,
  .btn-glass,
  .glass-morphism {
    display: none !important;
  }
  
  body {
    background: white !important;
    color: black !important;
  }
  
  .card-glass,
  .card-neumorphism {
    background: white !important;
    box-shadow: none !important;
    border: 1px solid #e5e7eb;
    page-break-inside: avoid;
  }
}

/* ===== 可访问性 ===== */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

/* ===== 深色模式媒体查询 ===== */
@media (prefers-color-scheme: dark) {
  .auto-theme {
    @apply theme-dark;
  }
}

@media (prefers-color-scheme: light) {
  .auto-theme {
    @apply theme-warm;
  }
}

/* ===== 焦点管理 ===== */
.focus-visible:focus-visible {
  outline: 2px solid rgba(236, 72, 153, 0.8);
  outline-offset: 2px;
  border-radius: 4px;
}

/* ===== 工具类 ===== */
.hide-scrollbar {
  -ms-overflow-style: none;
  scrollbar-width: none;
}

.hide-scrollbar::-webkit-scrollbar {
  display: none;
}

.perspective-1000 {
  perspective: 1000px;
}

.preserve-3d {
  transform-style: preserve-3d;
}

.backface-hidden {
  backface-visibility: hidden;
}

.backdrop-blur-heavy {
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
}

.selection-pink::selection {
  background: rgba(236, 72, 153, 0.3);
}

/* ===== 性能优化 ===== */
.will-change-transform {
  will-change: transform;
}

.will-change-opacity {
  will-change: opacity;
}

.gpu-accelerated {
  transform: translateZ(0);
  -webkit-transform: translateZ(0);
}

/* ===== 页面组件样式 ===== */

/* 画廊页面 */
.gallery-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
  gap: 1.5rem;
  animation: fadeInUp 0.8s ease-out;
}

.gallery-item {
  position: relative;
  opacity: 0;
  animation: slideInUp 0.6s ease-out forwards;
}

.gallery-item:nth-child(odd) {
  animation-delay: 0.1s;
}

.gallery-item:nth-child(even) {
  animation-delay: 0.2s;
}

.filter-btn {
  @apply px-4 py-2 glass-morphism rounded-full text-sm font-medium transition-all duration-300 hover-lift cursor-pointer;
  border: 2px solid transparent;
}

.filter-btn.active {
  @apply bg-gradient-to-r from-pink-500 to-purple-500 text-white border-pink-300;
  box-shadow: 0 4px 15px rgba(236, 72, 153, 0.4);
}

.filter-btn .emoji {
  @apply inline-block mr-2 text-lg;
}

/* 详情页面 */
.swiper {
  width: 100%;
  height: 100%;
}

.swiper-slide {
  text-align: center;
  font-size: 18px;
  background: transparent;
  display: flex;
  justify-content: center;
  align-items: center;
}

.swiper-button-next,
.swiper-button-prev {
  color: rgba(236, 72, 153, 0.8) !important;
  background: rgba(255, 255, 255, 0.1);
  backdrop-filter: blur(10px);
  border-radius: 50%;
  width: 44px !important;
  height: 44px !important;
  margin-top: -22px !important;
  transition: all 0.3s ease;
}

.swiper-button-next:hover,
.swiper-button-prev:hover {
  background: rgba(255, 255, 255, 0.2);
  transform: scale(1.1);
}

.swiper-pagination-bullet {
  background: rgba(236, 72, 153, 0.6) !important;
  opacity: 0.7 !important;
}

.swiper-pagination-bullet-active {
  background: #ec4899 !important;
  opacity: 1 !important;
}

/* 粒子背景 */
.particles-container {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: var(--z-background);
  overflow: hidden;
}

.particle {
  position: absolute;
  width: 4px;
  height: 4px;
  background: radial-gradient(circle, rgba(236, 72, 153, 0.8) 0%, rgba(236, 72, 153, 0.2) 50%, transparent 100%);
  border-radius: 50%;
  animation: particle-float 20s linear infinite;
}

.particle:nth-child(2n) {
  width: 6px;
  height: 6px;
  background: radial-gradient(circle, rgba(139, 92, 246, 0.6) 0%, rgba(139, 92, 246, 0.1) 50%, transparent 100%);
}

.particle:nth-child(3n) {
  width: 3px;
  height: 3px;
  background: radial-gradient(circle, rgba(59, 130, 246, 0.7) 0%, rgba(59, 130, 246, 0.2) 50%, transparent 100%);
}

/* 新的动画定义 */
@keyframes slideInUp {
  from {
    opacity: 0;
    transform: translateY(30px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes scaleIn {
  from {
    opacity: 0;
    transform: scale(0.8);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

/* 移动端优化 */
@media (max-width: 768px) {
  .gallery-grid {
    grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
    gap: 1rem;
  }
  
  .filter-btn {
    @apply px-3 py-1.5 text-xs;
  }
  
  .swiper-button-next,
  .swiper-button-prev {
    width: 36px !important;
    height: 36px !important;
    margin-top: -18px !important;
  }
}

@media (max-width: 480px) {
  .gallery-grid {
    grid-template-columns: 1fr;
  }
  
  .particles-container {
    display: none;
  }
}

/* ===== 图片画廊优化样式 ===== */

/* 缩略图导航优化 */
.gallery-thumb {
  @apply transition-all duration-300 ease-out relative overflow-hidden;
  transform: scale(1);
}

.gallery-thumb:hover {
  @apply shadow-lg;
  transform: scale(1.05);
}

.gallery-thumb.active {
  @apply ring-4 ring-pink-400 ring-opacity-60 shadow-xl;
  transform: scale(1.1);
  z-index: 10;
}

.gallery-thumb.active::after {
  content: '✓';
  @apply absolute top-1 right-1 w-5 h-5 bg-pink-500 text-white rounded-full flex items-center justify-center text-xs font-bold shadow-md;
  animation: scaleIn 0.3s ease-out;
}

/* 图片说明文字优化 */
.image-caption {
  @apply transition-all duration-300 cursor-pointer;
}

.image-caption:hover {
  @apply shadow-md transform scale-105;
  backdrop-filter: blur(12px);
}

/* 缩略图导航区域优化 */
.thumbnail-navigation {
  @apply transition-all duration-500;
}

.thumbnail-navigation .thumbnail-item {
  @apply transition-all duration-300 cursor-pointer;
}

.thumbnail-navigation .thumbnail-item:hover {
  @apply transform -translate-y-1;
}

.thumbnail-navigation .thumbnail-item:hover p {
  @apply text-pink-500 font-medium;
}

.thumbnail-navigation .thumbnail-item img {
  @apply transition-transform duration-300;
}

.thumbnail-navigation .thumbnail-item:hover img {
  @apply scale-110;
}

/* 主图片区域优化 */
.main-gallery {
  @apply relative;
}

.main-gallery .swiper {
  @apply rounded-xl shadow-2xl overflow-hidden;
}

.main-gallery .swiper-slide {
  @apply relative;
}

/* 图片统计信息样式 */
.gallery-stats {
  @apply transition-all duration-300;
}

.gallery-stats:hover {
  @apply shadow-md transform scale-105;
}

/* Swiper 按钮进一步优化 */
.swiper-button-next,
.swiper-button-prev {
  @apply transition-all duration-300 ease-out;
  opacity: 0.8;
}

.swiper-button-next:hover,
.swiper-button-prev:hover {
  @apply scale-110;
  opacity: 1;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}

/* 分页器优化 */
.swiper-pagination {
  @apply transition-all duration-300;
}

.swiper-pagination-bullet {
  @apply transition-all duration-300;
  width: 12px !important;
  height: 12px !important;
  margin: 0 6px !important;
}

.swiper-pagination-bullet:hover {
  @apply scale-125;
}

.swiper-pagination-bullet-active {
  @apply scale-150;
  box-shadow: 0 2px 8px rgba(236, 72, 153, 0.4);
}

/* 响应式优化 */
@media (max-width: 768px) {
  .gallery-thumb.active::after {
    @apply w-4 h-4 text-xs;
  }
  
  .thumbnail-navigation {
    @apply px-2;
  }
  
  .main-gallery .swiper-button-next,
  .main-gallery .swiper-button-prev {
    @apply w-8 h-8;
  }
}

@media (max-width: 480px) {
  .thumbnail-navigation .grid {
    @apply grid-cols-2 gap-3;
  }
  
  .gallery-stats {
    @apply text-xs;
  }
  
  .gallery-stats .flex {
    @apply flex-col space-y-2 space-x-0;
  }
}

/* ===== 创意画廊样式 ===== */

/* 主视觉焦点图片 */
.main-focal-image {
  position: relative;
  overflow: hidden;
}

.main-focal-image::before {
  content: '';
  position: absolute;
  top: -50%;
  left: -50%;
  width: 200%;
  height: 200%;
  background: conic-gradient(from 0deg, transparent, rgba(236, 72, 153, 0.1), transparent, rgba(168, 85, 247, 0.1), transparent);
  animation: rotate-spotlight 20s linear infinite;
  opacity: 0;
  transition: opacity 0.5s ease;
}

.main-focal-image:hover::before {
  opacity: 1;
}

/* 文字可读性优化 */
.main-focal-image .text-white,
.story-card .text-white,
.art-piece .text-white {
  text-shadow: 0 1px 3px rgba(0, 0, 0, 0.5), 0 2px 6px rgba(0, 0, 0, 0.3);
}

.main-focal-image h4,
.story-card h4,
.art-piece h4 {
  font-weight: 600;
  letter-spacing: 0.025em;
}

.main-focal-image p,
.story-card p,
.art-piece p {
  line-height: 1.4;
  backdrop-filter: blur(1px);
}

@keyframes rotate-spotlight {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

/* 创意瀑布流艺术网格 */
.art-grid {
  position: relative;
}

.art-piece {
  transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
}

.art-piece:hover {
  z-index: 20;
}

/* 不同布局样式的特殊效果 */
.art-grid[data-layout="asymmetric"] .art-piece:nth-child(odd) {
  transform-origin: top left;
}

.art-grid[data-layout="asymmetric"] .art-piece:nth-child(even) {
  transform-origin: bottom right;
}

.art-grid[data-layout="magazine"] .art-piece {
  border: 2px solid rgba(255, 255, 255, 0.1);
  transition: all 0.3s ease;
}

.art-grid[data-layout="magazine"] .art-piece:hover {
  border-color: rgba(236, 72, 153, 0.5);
  box-shadow: 0 0 30px rgba(236, 72, 153, 0.3);
}

.art-grid[data-layout="mondrian"] .art-piece {
  border: 1px solid rgba(0, 0, 0, 0.1);
}

.art-grid[data-layout="mondrian"] .art-piece:nth-child(1) {
  background: linear-gradient(45deg, rgba(239, 68, 68, 0.1), transparent);
}

.art-grid[data-layout="mondrian"] .art-piece:nth-child(2) {
  background: linear-gradient(45deg, rgba(59, 130, 246, 0.1), transparent);
}

.art-grid[data-layout="mondrian"] .art-piece:nth-child(3) {
  background: linear-gradient(45deg, rgba(251, 191, 36, 0.1), transparent);
}

/* 故事轮播卡片 */
.story-card {
  position: relative;
  transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
}

.story-card.active {
  z-index: 10;
  box-shadow: 0 20px 60px rgba(236, 72, 153, 0.3);
}

.story-card::after {
  content: '';
  position: absolute;
  inset: 0;
  border-radius: inherit;
  background: linear-gradient(45deg, rgba(236, 72, 153, 0.2), rgba(168, 85, 247, 0.2));
  opacity: 0;
  transition: opacity 0.3s ease;
}

.story-card.active::after {
  opacity: 1;
}

/* Swiper 自定义样式 */
.story-swiper {
  padding: 20px 0;
}

.story-swiper .swiper-slide {
  height: auto;
}

.story-nav-next,
.story-nav-prev {
  color: #ec4899 !important;
  background: rgba(255, 255, 255, 0.9) !important;
  width: 40px !important;
  height: 40px !important;
  border-radius: 50% !important;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1) !important;
  transition: all 0.3s ease !important;
}

.story-nav-next:hover,
.story-nav-prev:hover {
  background: rgba(236, 72, 153, 0.9) !important;
  color: white !important;
  transform: scale(1.1);
}

.story-nav-next::after,
.story-nav-prev::after {
  font-size: 16px !important;
  font-weight: bold !important;
}

/* 溢出图片网格 */
.overflow-gallery {
  position: relative;
}

.overflow-item {
  position: relative;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.overflow-item:hover {
  z-index: 10;
}

/* 智能操作面板 */
.smart-gallery-actions {
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
}

.gallery-shuffle-btn,
.gallery-fullscreen-btn,
.gallery-slideshow-btn {
  position: relative;
  overflow: hidden;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.gallery-shuffle-btn::before,
.gallery-fullscreen-btn::before,
.gallery-slideshow-btn::before {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  width: 0;
  height: 0;
  background: rgba(255, 255, 255, 0.2);
  border-radius: 50%;
  transform: translate(-50%, -50%);
  transition: all 0.3s ease;
}

.gallery-shuffle-btn:hover::before,
.gallery-fullscreen-btn:hover::before,
.gallery-slideshow-btn:hover::before {
  width: 300px;
  height: 300px;
}

/* 响应式调整 */
@media (max-width: 768px) {
  .art-grid {
    grid-template-columns: repeat(2, 1fr) !important;
    gap: 8px !important;
  }
  
  .art-piece {
    grid-column: span 1 !important;
    grid-row: span 1 !important;
  }
  
  .main-focal-image {
    aspect-ratio: 16/9 !important;
  }
  
  /* 移动端文字优化 */
  .main-focal-image .text-white,
  .story-card .text-white,
  .art-piece .text-white {
    font-size: 0.875rem;
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.6);
  }
  
  .main-focal-image p,
  .story-card p,
  .art-piece p {
    font-size: 0.75rem;
    line-height: 1.3;
  }
  
  .story-swiper {
    padding: 10px 0;
  }
  
  .smart-gallery-actions {
    flex-direction: column;
    gap: 16px;
  }
  
  .smart-gallery-actions > div:first-child {
    justify-content: center;
  }
}

@media (max-width: 640px) {
  .overflow-gallery .grid {
    grid-template-columns: repeat(3, 1fr) !important;
  }
  
  .story-nav-next,
  .story-nav-prev {
    width: 32px !important;
    height: 32px !important;
  }
  
  .story-nav-next::after,
  .story-nav-prev::after {
    font-size: 14px !important;
  }
}

/* 暗色主题适配 */
.theme-dark .art-grid[data-layout="magazine"] .art-piece {
  border-color: rgba(255, 255, 255, 0.1);
}

.theme-dark .art-grid[data-layout="magazine"] .art-piece:hover {
  border-color: rgba(236, 72, 153, 0.7);
}

.theme-dark .story-nav-next,
.theme-dark .story-nav-prev {
  background: rgba(30, 41, 59, 0.9) !important;
  color: #ec4899 !important;
}

.theme-dark .story-nav-next:hover,
.theme-dark .story-nav-prev:hover {
  background: rgba(236, 72, 153, 0.9) !important;
  color: white !important;
}

/* ===== 合照轮播专用样式 ===== */

/* 合照轮播容器 */
.couple-photos-carousel {
  position: relative;
}

.couple-swiper {
  border-radius: 1rem;
  overflow: hidden;
  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
  transition: all 0.3s ease;
}

.couple-swiper:hover {
  box-shadow: 0 25px 50px rgba(0, 0, 0, 0.15);
  transform: translateY(-2px);
}

/* 合照轮播幻灯片 */
.couple-swiper .swiper-slide {
  position: relative;
  overflow: hidden;
}

.couple-swiper .swiper-slide img {
  transition: transform 0.7s ease;
}

.couple-swiper .swiper-slide:hover img {
  transform: scale(1.05);
}

/* 合照轮播导航按钮 */
.couple-nav-next,
.couple-nav-prev {
  width: 50px !important;
  height: 50px !important;
  background: rgba(255, 255, 255, 0.2) !important;
  backdrop-filter: blur(10px) !important;
  border-radius: 50% !important;
  border: 2px solid rgba(255, 255, 255, 0.3) !important;
  transition: all 0.3s ease !important;
}

.couple-nav-next:hover,
.couple-nav-prev:hover {
  background: rgba(236, 72, 153, 0.8) !important;
  border-color: rgba(236, 72, 153, 0.8) !important;
  transform: scale(1.1) !important;
}

.couple-nav-next::after,
.couple-nav-prev::after {
  font-size: 18px !important;
  font-weight: bold !important;
  color: white !important;
}

/* 合照轮播分页器 */
.couple-pagination {
  padding: 20px 0 !important;
}

.couple-pagination .swiper-pagination-bullet {
  width: 12px !important;
  height: 12px !important;
  margin: 0 6px !important;
  background: rgba(255, 255, 255, 0.5) !important;
  border: 2px solid rgba(255, 255, 255, 0.8) !important;
  transition: all 0.3s ease !important;
}

.couple-pagination .swiper-pagination-bullet:hover {
  transform: scale(1.2) !important;
  background: rgba(236, 72, 153, 0.8) !important;
}

.couple-pagination .swiper-pagination-bullet-active {
  background: rgba(236, 72, 153, 1) !important;
  border-color: rgba(236, 72, 153, 1) !important;
  transform: scale(1.3) !important;
  box-shadow: 0 0 20px rgba(236, 72, 153, 0.5) !important;
}

/* 缩略图容器 */
.thumbnails-container {
  margin-top: 1.5rem;
}

.thumbnail-item {
  position: relative;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  cursor: pointer;
}

.thumbnail-item:hover {
  z-index: 10;
}

.thumbnail-item.active {
  z-index: 20;
}

.thumbnail-item.active::after {
  content: '✓';
  position: absolute;
  top: -2px;
  right: -2px;
  width: 20px;
  height: 20px;
  background: linear-gradient(45deg, #ec4899, #a855f7);
  color: white;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 12px;
  font-weight: bold;
  box-shadow: 0 2px 8px rgba(236, 72, 153, 0.4);
  animation: checkmark-appear 0.3s ease-out;
}

@keyframes checkmark-appear {
  0% {
    opacity: 0;
    transform: scale(0.5);
  }
  100% {
    opacity: 1;
    transform: scale(1);
  }
}

/* 合照模态框 */
.couple-photo-modal {
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
}

.couple-photo-modal img {
  max-height: 90vh;
  max-width: 90vw;
  box-shadow: 0 30px 60px rgba(0, 0, 0, 0.3);
}

/* 响应式调整 */
@media (max-width: 768px) {
  .couple-nav-next,
  .couple-nav-prev {
    width: 40px !important;
    height: 40px !important;
  }
  
  .couple-nav-next::after,
  .couple-nav-prev::after {
    font-size: 16px !important;
  }
  
  .thumbnails-container .grid {
    grid-template-columns: repeat(4, 1fr) !important;
    gap: 8px !important;
  }
  
  .couple-swiper {
    border-radius: 0.75rem;
  }
}

@media (max-width: 640px) {
  .thumbnails-container .grid {
    grid-template-columns: repeat(3, 1fr) !important;
  }
  
  .couple-pagination {
    padding: 15px 0 !important;
  }
  
  .couple-pagination .swiper-pagination-bullet {
    width: 10px !important;
    height: 10px !important;
    margin: 0 4px !important;
  }
}

/* 暗色主题适配 */
.theme-dark .couple-nav-next,
.theme-dark .couple-nav-prev {
  background: rgba(30, 41, 59, 0.8) !important;
  border-color: rgba(255, 255, 255, 0.2) !important;
}

.theme-dark .couple-nav-next:hover,
.theme-dark .couple-nav-prev:hover {
  background: rgba(236, 72, 153, 0.8) !important;
  border-color: rgba(236, 72, 153, 0.8) !important;
}