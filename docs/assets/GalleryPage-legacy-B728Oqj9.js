System.register(["./main-legacy-D3lDK_Hu.js"],function(t,e){"use strict";var n,a;return{setters:[t=>{n=t.u,a=t.e}],execute:function(){t("default",class{constructor(t={}){this.props=t,this.currentFilter="all",this.lightboxInstance=null}async render(){const t=n.sortByDate(),e=this.extractAllImages(t);return`\n      <div class="gallery-page min-h-screen bg-gradient-to-br from-pink-50 via-white to-purple-50 dark:from-gray-900 dark:via-gray-800 dark:to-purple-900">\n        \x3c!-- 页面头部 --\x3e\n        <header class="relative overflow-hidden py-20 lg:py-32">\n          <div class="container mx-auto px-6 relative z-10">\n            <div class="text-center max-w-4xl mx-auto" data-aos="fade-up">\n              <h1 class="text-4xl lg:text-6xl font-bold text-gradient mb-6">\n                回忆画廊\n              </h1>\n              <p class="text-xl text-gray-600 dark:text-gray-300 mb-8">\n                珍藏我们共同度过的每一个美好瞬间\n              </p>\n              <div class="w-24 h-1 bg-gradient-to-r from-pink-500 to-purple-500 mx-auto rounded-full"></div>\n            </div>\n          </div>\n          \n          \x3c!-- 背景装饰 --\x3e\n          <div class="absolute inset-0 overflow-hidden">\n            <div class="absolute -top-40 -right-40 w-80 h-80 bg-gradient-to-br from-pink-400/20 to-purple-400/20 rounded-full blur-3xl"></div>\n            <div class="absolute -bottom-40 -left-40 w-80 h-80 bg-gradient-to-br from-blue-400/20 to-pink-400/20 rounded-full blur-3xl"></div>\n          </div>\n        </header>\n\n        \x3c!-- 筛选器 --\x3e\n        <section class="container mx-auto px-6 mb-12">\n          <div class="glass-morphism rounded-2xl p-6" data-aos="fade-up" data-aos-delay="100">\n            <div class="flex flex-wrap gap-4 justify-center">\n              <button class="filter-btn active" data-filter="all">\n                <span class="emoji">🖼️</span>\n                全部照片 (${e.length})\n              </button>\n              ${Object.entries(a).map(([t,n])=>{const a=this.getImageCountByType(t,e);return`\n                  <button class="filter-btn" data-filter="${t}">\n                    <span class="emoji">${n.icon}</span>\n                    ${n.name} (${a})\n                  </button>\n                `}).join("")}\n            </div>\n          </div>\n        </section>\n\n        \x3c!-- 图片网格 --\x3e\n        <section class="container mx-auto px-6 pb-20">\n          <div class="gallery-grid" id="gallery-grid">\n            ${this.renderImageGrid(e)}\n          </div>\n        </section>\n\n        \x3c!-- 统计信息 --\x3e\n        <section class="container mx-auto px-6 pb-20">\n          <div class="glass-morphism rounded-2xl p-8 text-center" data-aos="fade-up">\n            <h3 class="text-2xl font-bold text-gradient mb-6">📊 我们的回忆统计</h3>\n            <div class="grid grid-cols-2 lg:grid-cols-4 gap-6">\n              ${this.renderStatistics()}\n            </div>\n          </div>\n        </section>\n      </div>\n    `}extractAllImages(t){const e=[];return t.forEach(t=>{t.media?.coverImage&&e.push({...t.media.coverImage,eventId:t.id,eventType:t.type,eventName:t.name,eventTitle:t.title,date:t.dates.gregorian,isCover:!0}),t.media?.gallery&&t.media.gallery.forEach(n=>{e.push({...n,eventId:t.id,eventType:t.type,eventName:t.name,eventTitle:t.title,date:t.dates.gregorian,isCover:!1})})}),e.sort((t,e)=>new Date(e.date)-new Date(t.date))}getImageCountByType(t,e){return e.filter(e=>e.eventType===t).length}renderImageGrid(t){return t.map((t,e)=>`\n      <div class="gallery-item" \n           data-type="${t.eventType}" \n           data-aos="fade-up" \n           data-aos-delay="${e%12*50}">\n        <div class="glass-morphism rounded-xl overflow-hidden group cursor-pointer hover-lift">\n          <div class="aspect-square relative overflow-hidden">\n            <img src="${t.src}" \n                 alt="${t.alt}"\n                 class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"\n                 loading="lazy">\n            \n            \x3c!-- 悬浮遮罩 --\x3e\n            <div class="absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300">\n              <div class="absolute bottom-4 left-4 right-4 text-white">\n                <p class="font-medium text-sm mb-1">${t.eventName}</p>\n                <p class="text-xs opacity-90">${t.caption||t.alt}</p>\n              </div>\n            </div>\n            \n            \x3c!-- 放大图标 --\x3e\n            <div class="absolute top-4 right-4 w-8 h-8 bg-white/20 backdrop-blur-sm rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300">\n              <span class="text-white text-sm">🔍</span>\n            </div>\n            \n            \x3c!-- 类型标签 --\x3e\n            <div class="absolute top-4 left-4">\n              <span class="px-2 py-1 bg-white/20 backdrop-blur-sm rounded-full text-white text-xs">\n                ${a[t.eventType]?.icon} ${a[t.eventType]?.name}\n              </span>\n            </div>\n          </div>\n        </div>\n      </div>\n    `).join("")}renderStatistics(){const t=n.getStatistics();return`\n      <div class="text-center">\n        <div class="text-3xl font-bold text-gradient mb-2">${this.extractAllImages(n.sortByDate()).length}</div>\n        <div class="text-sm text-gray-600 dark:text-gray-400">珍贵照片</div>\n      </div>\n      <div class="text-center">\n        <div class="text-3xl font-bold text-gradient mb-2">${t.totalEvents}</div>\n        <div class="text-sm text-gray-600 dark:text-gray-400">美好回忆</div>\n      </div>\n      <div class="text-center">\n        <div class="text-3xl font-bold text-gradient mb-2">${t.daysInLove}</div>\n        <div class="text-sm text-gray-600 dark:text-gray-400">相爱天数</div>\n      </div>\n      <div class="text-center">\n        <div class="text-3xl font-bold text-gradient mb-2">${t.featuredCount}</div>\n        <div class="text-sm text-gray-600 dark:text-gray-400">精选时刻</div>\n      </div>\n    `}filterImages(t){this.currentFilter=t,document.querySelectorAll(".gallery-item").forEach((e,n)=>{const a=e.dataset.type;"all"===t||a===t?(e.style.display="block",setTimeout(()=>{e.setAttribute("data-aos","fade-up"),e.setAttribute("data-aos-delay",n%12*50)},50)):e.style.display="none"}),document.querySelectorAll(".filter-btn").forEach(t=>{t.classList.remove("active")}),document.querySelector(`[data-filter="${t}"]`).classList.add("active")}initLightbox(){document.querySelectorAll(".gallery-item").forEach(t=>{t.addEventListener("click",e=>{const n=t.querySelector("img");this.openLightbox(n.src,n.alt)})})}openLightbox(t,e){const n=document.createElement("div");n.className="fixed inset-0 bg-black/90 backdrop-blur-sm z-50 flex items-center justify-center p-4",n.innerHTML=`\n      <div class="relative max-w-4xl max-h-full">\n        <img src="${t}" alt="${e}" class="max-w-full max-h-full object-contain rounded-lg">\n        <button class="absolute top-4 right-4 w-10 h-10 bg-white/20 backdrop-blur-sm rounded-full flex items-center justify-center text-white hover:bg-white/30 transition-colors">\n          ✕\n        </button>\n        <div class="absolute bottom-4 left-4 right-4 text-center">\n          <p class="text-white bg-black/50 backdrop-blur-sm rounded-lg px-4 py-2 inline-block">${e}</p>\n        </div>\n      </div>\n    `,n.addEventListener("click",t=>{t.target!==n&&"✕"!==t.target.textContent||document.body.removeChild(n)}),document.body.appendChild(n)}async mount(){window.AOS&&window.AOS.refresh(),document.querySelectorAll(".filter-btn").forEach(t=>{t.addEventListener("click",()=>{const e=t.dataset.filter;this.filterImages(e)})}),this.initLightbox(),document.addEventListener("keydown",t=>{if("Escape"===t.key){const t=document.querySelector(".fixed.inset-0.bg-black\\/90");t&&document.body.removeChild(t)}})}})}}});
