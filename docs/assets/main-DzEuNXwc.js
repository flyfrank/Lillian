function e(){import.meta.url,import("_").catch(()=>1),async function*(){}().next()}!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const t={},a=function(e,a,i){let n=Promise.resolve();if(a&&a.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),i=(null==e?void 0:e.nonce)||(null==e?void 0:e.getAttribute("nonce"));n=Promise.allSettled(a.map(e=>{if((e=function(e){return"/"+e}(e))in t)return;t[e]=!0;const a=e.endsWith(".css"),n=a?'[rel="stylesheet"]':"";if(document.querySelector('link[href="'.concat(e,'"]').concat(n)))return;const s=document.createElement("link");return s.rel=a?"stylesheet":"modulepreload",a||(s.as="script"),s.crossOrigin="",s.href=e,i&&s.setAttribute("nonce",i),document.head.appendChild(s),a?new Promise((t,a)=>{s.addEventListener("load",t),s.addEventListener("error",()=>a(new Error("Unable to preload CSS for ".concat(e))))}):void 0}))}function s(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return n.then(t=>{for(const e of t||[])"rejected"===e.status&&s(e.reason);return e().catch(s)})},i={title:"我们的爱情时光",subtitle:"爱情的数字化博物馆",description:"记录我们共同度过的每一个美好瞬间",anniversary:{startDate:"2025-08-16"},theme:{default:"warm",allowToggle:!0}},n={traditional:{name:"传统节日",icon:"🎊",color:"brand-pink",description:"中华传统节日纪念"},birthday:{name:"生日",icon:"🎂",color:"brand-gold",description:"生日庆祝时光"},anniversary:{name:"纪念日",icon:"💕",color:"pink",description:"特殊纪念时刻"},travel:{name:"旅行",icon:"✈️",color:"blue",description:"一起的旅行足迹"},milestone:{name:"里程碑",icon:"🌟",color:"purple",description:"重要人生节点"}},s=[{id:"spring-festival-2024",type:"traditional",dates:{lunar:"正月初一",gregorian:"2024-02-10",year:"2024",displayDate:"正月初一"},name:"春节",title:"第一次一起过年",location:"家里",weather:"晴朗",description:{short:"我们第一次一起贴春联、包饺子、看春晚",long:"这是我们第一次一起过年，从准备年货到贴春联，从包饺子到看春晚，每一个环节都充满了甜蜜。你说以后每年都要这样过，我点头答应，心里已经开始期待明年的春节了。\n\n最难忘的是我们一起包饺子的时候，你手把手教我擀皮，虽然我包的歪七扭八，但你说那是世界上最美的饺子。除夕夜我们守岁到零点，一起许下新年愿望，愿我们的爱情如春节的烟花一样绚烂永恒。",highlights:["一起贴春联和窗花","手把手教我包饺子","除夕夜一起守岁","看春晚时的温馨时光"]},media:{coverImage:{src:"/assets/images/default-cover.svg",alt:"春节合影",position:"center"},gallery:[{src:"/assets/images/spring-festival-2024-1.jpg",alt:"贴春联",caption:"一起贴春联，满满的仪式感"},{src:"/assets/images/spring-festival-2024-2.jpg",alt:"包饺子",caption:"你教我包饺子的温馨画面"},{src:"/assets/images/spring-festival-2024-3.jpg",alt:"年夜饭",caption:"丰盛的年夜饭，满桌的爱意"},{src:"/assets/images/spring-festival-2024-4.jpg",alt:"烟花",caption:"零点时分的烟花，如我们的爱情"}],video:{src:"/assets/videos/spring-festival-2024.mp4",poster:"/assets/images/spring-festival-2024-video-poster.jpg",caption:"春节的美好瞬间合集"}},metadata:{tags:["传统","家庭","温馨","第一次","除夕"],mood:"joyful",significance:5,isPublic:!0,featured:!0,createdAt:"2024-02-11",updatedAt:"2024-02-11"},theme:{primary:"from-red-400 to-pink-400",secondary:"from-red-100 to-pink-100",accent:"red-500"}},{id:"lantern-festival-2024",type:"traditional",dates:{lunar:"正月十五",gregorian:"2024-02-24",year:"2024",displayDate:"正月十五"},name:"元宵节",title:"携手看灯会",location:"市中心灯会",weather:"微寒",description:{short:"人潮涌动中你紧紧握着我的手，在五彩斑斓的花灯下许下心愿",long:'还记得那天人潮涌动，你紧紧握着我的手，我们在五彩斑斓的花灯下许下心愿。你猜我许了什么愿？我的愿望是每年灯会身边都是你。\n\n我们看到了巨大的龙灯、精美的荷花灯，还有那盏写着"有情人终成眷属"的红灯笼。你说这盏灯笼就像是为我们准备的，我笑着点头，心里满满的都是幸福。',highlights:["五彩斑斓的花灯海洋","许下美好的心愿",'"有情人终成眷属"的红灯笼',"人群中紧握的双手"]},media:{coverImage:{src:"/assets/images/default-cover.svg",alt:"灯会合影",position:"center"},gallery:[{src:"/assets/images/lantern-festival-2024-1.jpg",alt:"花灯",caption:"漂亮的荷花灯，如你一样美丽"},{src:"/assets/images/lantern-festival-2024-2.jpg",alt:"龙灯",caption:"气势磅礴的巨龙灯"}]},metadata:{tags:["传统","灯会","许愿","浪漫"],mood:"romantic",significance:4,isPublic:!0,featured:!0,createdAt:"2024-02-25",updatedAt:"2024-02-25"},theme:{primary:"from-orange-400 to-red-400",secondary:"from-orange-100 to-red-100",accent:"orange-500"}},{id:"dragon-boat-2024",type:"traditional",dates:{lunar:"五月初五",gregorian:"2024-06-10",year:"2024",displayDate:"五月初五"},name:"端午节",title:"我们一起包的第一个粽子",location:"家里厨房",weather:"温暖",description:{short:"你说要教我包粽子，结果我包的歪七扭八，你笑得直不起腰",long:"你说要教我包粽子，结果我包的歪七扭八，你笑得直不起腰。最后还是你一个人包了一大锅，我负责在旁边添乱和偷吃。\n\n虽然我的手艺不行，但你说这是你吃过最香的粽子，因为里面包的是我们的爱情。我们还一起看了龙舟比赛的直播，你说明年要带我去现场看真正的龙舟赛。",highlights:["第一次学包粽子","歪七扭八的成品","你温柔的笑声","一起看龙舟比赛"]},media:{coverImage:{src:"/assets/images/default-cover.svg",alt:"包粽子",position:"center"},gallery:[{src:"/assets/images/dragon-boat-2024-1.jpg",alt:"包粽子过程",caption:"你手把手教我包粽子"},{src:"/assets/images/dragon-boat-2024-2.jpg",alt:"粽子成品",caption:"虽然形状奇怪，但味道很棒"}]},metadata:{tags:["传统","美食","学习","温馨"],mood:"joyful",significance:4,isPublic:!0,featured:!1,createdAt:"2024-06-11",updatedAt:"2024-06-11"},theme:{primary:"from-green-400 to-teal-400",secondary:"from-green-100 to-teal-100",accent:"green-500"}},{id:"qixi-2023",type:"traditional",dates:{lunar:"七月初七",gregorian:"2023-08-22",year:"2023",displayDate:"七月初七"},name:"七夕节",title:"我们的第一个七夕",location:"天台",weather:"星空璀璨",description:{short:"牛郎织女一年才能相会一次，而我每天都能见到你",long:"牛郎织女一年才能相会一次，而我每天都能见到你，这大概就是我最大的幸福。那晚我们在天台看星星，你说要做我永远的织女。\n\n我指着天上的星星告诉你哪个是牛郎星哪个是织女星，你说你找到了，还说银河虽然很美，但你更愿意和我走过人间的每一天。那一刻我觉得，拥有你比拥有整个星空还要幸福。",highlights:["天台看星星","寻找牛郎织女星","你说要做我永远的织女","比银河更美的爱情"]},media:{coverImage:{src:"/assets/images/default-cover.svg",alt:"七夕星空",position:"center"},gallery:[{src:"/assets/images/qixi-2023-1.jpg",alt:"天台合影",caption:"星空下的我们"},{src:"/assets/images/qixi-2023-2.jpg",alt:"星空",caption:"那夜的星空格外璀璨"},{src:"/assets/images/qixi-2023-3.jpg",alt:"七夕礼物",caption:"你送给我的七夕礼物"}]},metadata:{tags:["传统","浪漫","星空","第一次"],mood:"romantic",significance:5,isPublic:!0,featured:!0,createdAt:"2023-08-23",updatedAt:"2023-08-23"},theme:{primary:"from-purple-400 to-indigo-400",secondary:"from-purple-100 to-indigo-100",accent:"purple-500"}},{id:"mid-autumn-2023",type:"traditional",dates:{lunar:"八月十五",gregorian:"2023-09-29",year:"2023",displayDate:"八月十五"},name:"中秋节",title:"月圆人更圆",location:"家里阳台",weather:"月明星稀",description:{short:"中秋的月亮格外圆，但我觉得没有你的笑容圆",long:'中秋的月亮格外圆，但我觉得没有你的笑容圆。我们坐在阳台上吃月饼赏月，你说月亮像你做的蛋黄酥，我说你比月亮还美。\n\n那晚的月亮真的很亮，照在你脸上的时候，我觉得嫦娥也要嫉妒你的美丽。我们分享着同一块月饼，你说这叫"分享甜蜜"，我说这叫"永结同心"。',highlights:["阳台赏月的温馨","分享同一块月饼","月光下的你最美",'"分享甜蜜"的约定']},media:{coverImage:{src:"/assets/images/default-cover.svg",alt:"中秋赏月",position:"center"},gallery:[{src:"/assets/images/mid-autumn-2023-1.jpg",alt:"月饼",caption:"精美的月饼礼盒"},{src:"/assets/images/mid-autumn-2023-2.jpg",alt:"赏月",caption:"阳台赏月的我们"}]},metadata:{tags:["传统","赏月","月饼","团圆"],mood:"peaceful",significance:4,isPublic:!0,featured:!1,createdAt:"2023-09-30",updatedAt:"2023-09-30"},theme:{primary:"from-yellow-400 to-orange-400",secondary:"from-yellow-100 to-orange-100",accent:"yellow-500"}},{id:"her-birthday-2023",type:"birthday",dates:{lunar:"九月初八",gregorian:"2023-10-20",year:"2023",displayDate:"10月20日"},name:"你的生日",title:"给你的惊喜派对",location:"我们的小家",weather:"温暖如春",description:{short:"这是我第一次为你准备生日惊喜",long:'这是我第一次为你准备生日惊喜，看到你推开门时惊讶又开心的表情，我觉得一切准备都值了。生日快乐，我的女孩！\n\n我提前一周就开始准备，偷偷订了你最喜欢的蛋糕，买了你心仪已久的礼物，还邀请了你的好朋友们。当你看到满屋子的气球和"生日快乐"的横幅时，你感动得眼泪都出来了。',highlights:["精心准备的惊喜派对","你最喜欢的蛋糕","心仪已久的礼物","感动的眼泪"]},media:{coverImage:{src:"/assets/images/default-cover.svg",alt:"生日惊喜",position:"center"},gallery:[{src:"/assets/images/her-birthday-2023-1.jpg",alt:"生日蛋糕",caption:"精美的生日蛋糕"},{src:"/assets/images/her-birthday-2023-2.jpg",alt:"生日礼物",caption:"特别为你准备的礼物"},{src:"/assets/images/her-birthday-2023-3.jpg",alt:"派对现场",caption:"温馨的生日派对现场"}]},metadata:{tags:["生日","惊喜","派对","第一次"],mood:"joyful",significance:5,isPublic:!0,featured:!0,createdAt:"2023-10-21",updatedAt:"2023-10-21"},theme:{primary:"from-pink-400 to-purple-400",secondary:"from-pink-100 to-purple-100",accent:"pink-500"}},{id:"my-birthday-2024",type:"birthday",dates:{lunar:"五月初二",gregorian:"2024-06-08",year:"2024",displayDate:"6月8日"},name:"我的生日",title:"你亲手做的生日蛋糕",location:"家里",weather:"阳光明媚",description:{short:"你偷偷学了好久做蛋糕",long:"你偷偷学了好久做蛋糕，虽然样子不太完美，但那是我吃过最甜的蛋糕。因为里面有你满满的爱意。\n\n原来你早在一个月前就开始偷偷练习做蛋糕，还专门去烘焙班学习。虽然最后做出来的蛋糕有点歪，但当你端着蛋糕唱生日歌的时候，我觉得你就是世界上最美的天使。",highlights:["偷偷学习做蛋糕","虽不完美但充满爱意","最甜的生日蛋糕","你就是最美的天使"]},media:{coverImage:{src:"/assets/images/default-cover.svg",alt:"自制生日蛋糕",position:"center"},gallery:[{src:"/assets/images/my-birthday-2024-1.jpg",alt:"制作过程",caption:"你认真做蛋糕的样子最美"},{src:"/assets/images/my-birthday-2024-2.jpg",alt:"成品蛋糕",caption:"虽然不完美，但充满爱意"}]},metadata:{tags:["生日","手工","蛋糕","用心"],mood:"nostalgic",significance:5,isPublic:!0,featured:!0,createdAt:"2024-06-09",updatedAt:"2024-06-09"},theme:{primary:"from-blue-400 to-indigo-400",secondary:"from-blue-100 to-indigo-100",accent:"blue-500"}},{id:"anniversary-2025",type:"anniversary",dates:{lunar:"六月廿三",gregorian:"2025-08-16",year:"2025",displayDate:"8月16日"},name:"恋爱纪念日",title:"我们在一起的第一天",location:"那个秋天的上午",weather:"秋至暑未消",description:{short:"你噙着温柔的笑向我走来，世界有了色彩",long:"那是一个秋日上午，暑气仍没褪尽，空气里还裹着夏日末段的燥热，你抱着一束清透的蓝色花束走来，长发松松地披在肩头，嘴角噙着温柔的笑意。明明周遭还是闷热的夏意，可你走近时，却像一缕冬日里最暖的阳光，轻轻照进了我有些沉闷的世界。\n\n我还记得那天的每一个细节——没有春日的微风，只有夏末偶尔掠过的、带着热气的风，却因你的出现变得格外温柔；阳光比春日更烈些，落在你身上，把那件米黄色的裙子衬得愈发温柔，像酷暑里悄悄浸了凉意的云朵，又像晒透了阳光的麦穗，带着让人安心的暖软气息，消解了周遭大半的燥热。",highlights:["那是一个秋日上午","你噙着温柔的笑","世界有了色彩","一起走过四季的约定"]},media:{coverImage:{src:"/assets/images/20250816/20250816-1.jpg",alt:"恋爱纪念日",position:"center"},gallery:[{src:"/assets/images/20250816/20250816-1.jpg",alt:"遇见的那一刻",caption:"那个改变一切的秋天的上午"},{src:"/assets/images/20250816/20250816-2.jpg",alt:"靠近的那一刻",caption:"一起动手做苔藓景观将我们的距离拉近"},{src:"/assets/images/20250816/20250816-3.jpg",alt:"陶艺作品",caption:"5个小时的陶艺制作，成果斐然"}]},metadata:{tags:["纪念日","表白","开始","秋天"],mood:"romantic",significance:5,isPublic:!0,featured:!0,createdAt:"2025-08-16",updatedAt:"2025-08-27"},theme:{primary:"from-rose-400 to-pink-400",secondary:"from-rose-100 to-pink-100",accent:"rose-500"}}],o={getEventsByType:e=>s.filter(t=>t.type===e),getEventsByYear:e=>s.filter(t=>t.dates.year===e),getFeaturedEvents:()=>s.filter(e=>e.metadata.featured),sortBySignificance:()=>[...s].sort((e,t)=>t.metadata.significance-e.metadata.significance),sortByDate:(e=!1)=>[...s].sort((t,a)=>{const i=new Date(t.dates.gregorian),n=new Date(a.dates.gregorian);return e?i-n:n-i}),searchEvents:e=>{const t=e.toLowerCase();return s.filter(e=>e.name.toLowerCase().includes(t)||e.title.toLowerCase().includes(t)||e.description.short.toLowerCase().includes(t)||e.metadata.tags.some(e=>e.toLowerCase().includes(t)))},getDaysInLove:()=>{const e=new Date(i.anniversary.startDate),t=new Date,a=Math.abs(t-e);return Math.ceil(a/864e5)},getStatistics:()=>({totalEvents:s.length,daysInLove:o.getDaysInLove(),eventsByType:Object.keys(n).reduce((e,t)=>(e[t]=o.getEventsByType(t).length,e),{}),featuredCount:o.getFeaturedEvents().length})},r=Object.freeze(Object.defineProperty({__proto__:null,eventTypes:n,loveEvents:s,siteConfig:i,utils:o},Symbol.toStringTag,{value:"Module"}));const c=new class{constructor(){this.routes=new Map,this.currentRoute=null,this.history=[],this.isNavigating=!1,this.transitionDuration=500,this.bindEvents(),this.initializeRoutes()}initializeRoutes(){this.addRoute("/",{name:"home",component:"HeroPage",title:"".concat(i.title," - ").concat(i.subtitle),meta:{description:i.description,keywords:"爱情,纪念,回忆,时光,浪漫"}}),this.addRoute("/hero",{name:"hero",component:"HeroPage",title:"欢迎来到".concat(i.title),meta:{description:"爱情的数字化博物馆封面页",keywords:"爱情,封面,欢迎"}}),this.addRoute("/timeline",{name:"timeline",component:"TimelinePage",title:"时光轴 - ".concat(i.title),meta:{description:"我们共同度过的美好时光",keywords:"时光轴,回忆,纪念日"}}),this.addRoute("/gallery",{name:"gallery",component:"GalleryPage",title:"回忆画廊 - ".concat(i.title),meta:{description:"精选的珍贵照片和回忆",keywords:"画廊,照片,回忆"}}),this.addRoute("/about",{name:"about",component:"AboutPage",title:"关于我们 - ".concat(i.title),meta:{description:"了解我们的爱情故事",keywords:"关于,爱情故事,我们"}}),this.addRoute("/event/:id",{name:"event-detail",component:"EventDetailPage",title:"详情页面",meta:{description:"纪念日详情页面",keywords:"详情,纪念日"}}),this.addRoute("/search",{name:"search",component:"SearchPage",title:"搜索 - ".concat(i.title),meta:{description:"搜索回忆和纪念日",keywords:"搜索,查找"}}),this.addRoute("/settings",{name:"settings",component:"SettingsPage",title:"设置 - ".concat(i.title),meta:{description:"个性化设置",keywords:"设置,主题,偏好"}})}addRoute(e,t){const a=[],i=e.match(/:([^/]+)/g);i&&i.forEach(e=>{a.push(e.substring(1))});const n=this.pathToRegex(e);this.routes.set(e,{...t,path:e,regex:n,paramNames:a})}pathToRegex(e){let t=e.replace(/\//g,"\\/").replace(/:([^/]+)/g,"([^/]+)");return new RegExp("^".concat(t,"$"))}bindEvents(){window.addEventListener("popstate",e=>{this.handlePopState(e)}),document.addEventListener("click",e=>{this.handleLinkClick(e)}),document.addEventListener("DOMContentLoaded",()=>{this.handleInitialRoute()})}handleInitialRoute(){const e=window.location.pathname+window.location.search;this.navigate(e,{replace:!0})}handlePopState(e){const t=window.location.pathname+window.location.search;this.navigate(t,{replace:!0,fromPopState:!0,state:e.state})}handleLinkClick(e){const t=e.target.closest("a[href]");if(!t)return;if(t.hostname!==window.location.hostname)return;if(t.hasAttribute("download"))return;if(t.hasAttribute("external"))return;if(e.ctrlKey||e.metaKey||e.shiftKey)return;e.preventDefault();const a=t.getAttribute("href");this.navigate(a)}async navigate(e,t={}){if(this.isNavigating)return;const{replace:a=!1,fromPopState:i=!1,state:n=null,transition:s=!0}=t;try{this.isNavigating=!0;const t=this.findRoute(e);if(!t)return console.warn("No route found for path: ".concat(e)),"/"!==e&&"/hero"!==e?void this.navigate("/",{replace:!0}):void this.navigate("/error",{replace:!0});const o=this.extractParams(e,t),r={route:t,path:e,params:o,query:this.extractQuery(e),state:n,fromPopState:i};if(!(await this.executeGuards(r)))return void(this.isNavigating=!1);i||(a?window.history.replaceState(n,"",e):window.history.pushState(n,"",e)),s?await this.executePageTransition(r):await this.renderPage(r),this.currentRoute=r,this.history.push(r),this.updateMetadata(t),this.emit("route:changed",r)}catch(o){console.error("Navigation error:",o),this.navigate("/error",{replace:!0})}finally{this.isNavigating=!1}}findRoute(e){const t=e.split("?")[0];for(const[a,i]of this.routes)if(i.regex.test(t))return i;return null}extractParams(e,t){const a=e.split("?")[0].match(t.regex);if(!a)return{};const i={};return t.paramNames.forEach((e,t)=>{i[e]=a[t+1]}),i}extractQuery(e){const t=e.split("?")[1];if(!t)return{};const a=new URLSearchParams(t),i={};for(const[n,s]of a)i[n]=s;return i}async executeGuards(e){return!this.emit("route:guard",e).some(e=>!1===e)}async executePageTransition(e){const t=document.getElementById("app");if(!t)return this.renderPage(e);t.classList.add("page-leaving"),await this.delay(this.transitionDuration/2),await this.renderPage(e),t.classList.remove("page-leaving"),t.classList.add("page-entering"),await this.delay(this.transitionDuration/2),t.classList.remove("page-entering")}async renderPage(e){const{route:t,params:i,query:n}=e;try{const e=await((e,t,a)=>{const i=e[t];return i?"function"==typeof i?i():Promise.resolve(i):new Promise((e,i)=>{("function"==typeof queueMicrotask?queueMicrotask:setTimeout)(i.bind(null,new Error("Unknown variable dynamic import: "+t+(t.split("/").length!==a?". Note that variables only represent file names one level deep.":""))))})})(Object.assign({"../pages/AboutPage.js":()=>a(()=>import("./AboutPage-Cn5aE81J.js"),[]),"../pages/EventDetailPage.js":()=>a(()=>import("./EventDetailPage-BLnAF6BB.js"),[]),"../pages/GalleryPage.js":()=>a(()=>import("./GalleryPage-CPQcPQMc.js"),[]),"../pages/HeroPage.js":()=>a(()=>import("./HeroPage-Bu8eT_7k.js"),[]),"../pages/TimelinePage.js":()=>a(()=>import("./TimelinePage-Dkd0ipAE.js"),[])}),"../pages/".concat(t.component,".js"),3),s=new(e.default||e[t.component])({route:t,params:i,query:n,router:this}),o=document.getElementById("app");o&&(o.innerHTML=await s.render(),"function"==typeof s.mount&&await s.mount())}catch(s){throw console.error("Failed to load page component: ".concat(t.component),s),s}}updateMetadata(e){document.title=e.title,e.meta&&(this.updateMetaTag("description",e.meta.description),this.updateMetaTag("keywords",e.meta.keywords))}updateMetaTag(e,t){if(!t)return;let a=document.querySelector('meta[name="'.concat(e,'"]'));a||(a=document.createElement("meta"),a.name=e,document.head.appendChild(a)),a.content=t}emit(e,t){const a=new CustomEvent(e,{detail:t});document.dispatchEvent(a);return this.getEventListeners(e).map(e=>e(t))}getEventListeners(e){return[]}delay(e){return new Promise(t=>setTimeout(t,e))}getCurrentRoute(){return this.currentRoute}generatePath(e,t={},a={}){const i=Array.from(this.routes.values()).find(t=>t.name===e);if(!i)return"/";let n=i.path;Object.entries(t).forEach(([e,t])=>{n=n.replace(":".concat(e),t)});const s=new URLSearchParams(a).toString();return s&&(n+="?".concat(s)),n}push(e,t=null){return this.navigate(e,{state:t})}replace(e,t=null){return this.navigate(e,{replace:!0,state:t})}back(){window.history.back()}forward(){window.history.forward()}go(e){window.history.go(e)}};window.router=c;const l=new class{constructor(){this.isInitialized=!1,this.currentTheme="warm",this.navigationEventsBound=!1,this.globalClickBound=!1,this.animations={gsap:null,aos:null},this.state={loading:!0,theme:i.theme.default,events:s,filteredEvents:s,currentFilter:"all",searchQuery:"",isMenuOpen:!1,currentEvent:null},this.bindMethods()}bindMethods(){this.toggleTheme=this.toggleTheme.bind(this),this.toggleMenu=this.toggleMenu.bind(this),this.filterEvents=this.filterEvents.bind(this),this.searchEvents=this.searchEvents.bind(this),this.handleResize=this.handleResize.bind(this),this.handleScroll=this.handleScroll.bind(this)}async init(){if(!this.isInitialized)try{this.showLoading(),this.detectThemePreference(),await this.initializeAnimations(),this.initializeEventListeners(),this.initializeRouter(),this.initializeParticles(),this.initializeTheme(),await this.preloadResources(),this.hideLoading(),this.isInitialized=!0,console.log("💖 Love Memorial App initialized successfully!")}catch(e){console.error("❌ Failed to initialize app:",e),this.showError("应用初始化失败，请刷新页面重试。")}}showLoading(){document.body.insertAdjacentHTML("afterbegin",'\n      <div id="loading-screen" class="loading-container fixed inset-0 z-100 glass-morphism flex items-center justify-center">\n        <div class="text-center">\n          <div class="loading-heart mx-auto mb-8"></div>\n          <h2 class="text-2xl font-playfair text-gradient mb-4">加载爱的回忆中...</h2>\n          <div class="w-64 h-2 bg-gray-200 rounded-full overflow-hidden">\n            <div class="h-full bg-gradient-to-r from-pink-500 to-purple-500 animate-pulse"></div>\n          </div>\n        </div>\n      </div>\n    ')}hideLoading(){const e=document.getElementById("loading-screen");e&&(e.style.opacity="0",setTimeout(()=>{e.remove(),this.state.loading=!1},500))}showError(e){const t='\n      <div id="error-screen" class="fixed inset-0 z-100 bg-red-50 flex items-center justify-center">\n        <div class="text-center p-8 glass-morphism max-w-md">\n          <div class="text-6xl mb-4">💔</div>\n          <h2 class="text-xl font-playfair text-red-600 mb-4">出错了</h2>\n          <p class="text-red-500 mb-6">'.concat(e,'</p>\n          <button onclick="location.reload()" class="btn-primary">\n            重新加载\n          </button>\n        </div>\n      </div>\n    ');document.body.innerHTML=t}detectThemePreference(){const e=localStorage.getItem("love-memorial-theme");if(e&&["warm","dark"].includes(e))this.state.theme=e;else if(window.matchMedia&&i.theme.allowToggle){const e=window.matchMedia("(prefers-color-scheme: dark)").matches;this.state.theme=e?"dark":"warm"}}async initializeAnimations(){try{const{gsap:e}=await a(async()=>{const{gsap:e}=await import("./index-DSaeZOsi.js");return{gsap:e}},[]),{ScrollTrigger:t}=await a(async()=>{const{ScrollTrigger:e}=await import("./ScrollTrigger-C08ljf4K.js");return{ScrollTrigger:e}},[]);this.animations.gsap=e,e.registerPlugin(t),e.defaults({duration:.8,ease:"power2.out"}),this.mainTimeline=e.timeline();const i=await a(()=>import("./aos-Dfx0ExBf.js").then(e=>e.a),[]);this.animations.aos=i.default,this.animations.aos.init({duration:800,easing:"ease-out-cubic",once:!0,offset:100,disable:"mobile"}),this.initPageAnimations(),console.log("✨ Animation libraries loaded")}catch(e){console.warn("⚠️ Failed to load animation libraries:",e)}}initPageAnimations(){if(!this.animations.gsap)return;const{gsap:e}=this.animations;this.mainTimeline=e.timeline(),e.set(".navbar",{y:-100,opacity:0}),e.to(".navbar",{y:0,opacity:1,duration:.8,ease:"power2.out",delay:.2}),e.set("#back-to-top",{scale:0,rotation:-180}),this.createEntranceAnimations(),this.createHoverAnimations(),this.createScrollAnimations()}createEntranceAnimations(){if(!this.animations.gsap)return;const{gsap:e}=this.animations;e.registerEffect({name:"cardEntrance",effect:(t,a)=>e.fromTo(t,{y:50,opacity:0,scale:.9},{y:0,opacity:1,scale:1,duration:a.duration||.6,ease:"power2.out",stagger:a.stagger||.1}),defaults:{duration:.6,stagger:.1}}),e.registerEffect({name:"titleReveal",effect:(t,a)=>e.fromTo(t,{y:30,opacity:0},{y:0,opacity:1,duration:a.duration||.8,ease:"power2.out"}),defaults:{duration:.8}})}createHoverAnimations(){if(!this.animations.gsap)return;const{gsap:e}=this.animations;document.addEventListener("mouseenter",t=>{t.target.classList.contains("hover-lift")&&e.to(t.target,{y:-8,scale:1.02,duration:.3,ease:"power2.out"})},!0),document.addEventListener("mouseleave",t=>{t.target.classList.contains("hover-lift")&&e.to(t.target,{y:0,scale:1,duration:.3,ease:"power2.out"})},!0),document.addEventListener("click",t=>{if(t.target.classList.contains("btn-primary")||t.target.closest(".btn-primary")){const a=t.target.classList.contains("btn-primary")?t.target:t.target.closest(".btn-primary");e.to(a,{scale:.95,duration:.1,yoyo:!0,repeat:1,ease:"power2.inOut"})}},!0)}createScrollAnimations(){if(!this.animations.gsap||!this.animations.gsap.ScrollTrigger)return;const{gsap:e,ScrollTrigger:t}=this.animations;e.utils.toArray(".parallax-bg").forEach(a=>{e.to(a,{y:(e,a)=>-t.maxScroll(window)*a.dataset.speed,ease:"none",scrollTrigger:{trigger:a,start:"top bottom",end:"bottom top",scrub:!0,invalidateOnRefresh:!0}})}),e.utils.toArray(".fade-in-up").forEach(t=>{e.fromTo(t,{y:50,opacity:0},{y:0,opacity:1,duration:.8,ease:"power2.out",scrollTrigger:{trigger:t,start:"top 80%",end:"bottom 20%",toggleActions:"play none none reverse"}})}),e.utils.toArray(".count-up").forEach(t=>{const a=parseInt(t.dataset.count||t.textContent),i={value:0};e.to(i,{value:a,duration:2,ease:"power2.out",onUpdate:()=>{t.textContent=Math.round(i.value)},scrollTrigger:{trigger:t,start:"top 80%",end:"bottom 20%",toggleActions:"play none none reverse"}})})}bindNavigationEvents(){if(this.navigationEventsBound)return;const e=()=>{const e=document.getElementById("menu-toggle");if(e&&!e.hasAttribute("data-bound")){const t=e=>{e.preventDefault(),e.stopPropagation(),console.log("菜单按钮被点击，当前状态:",this.state.isMenuOpen),this.toggleMenu()};e.addEventListener("click",t),e.addEventListener("touchend",e=>{e.preventDefault(),e.stopPropagation(),console.log("菜单按钮触摸结束，当前状态:",this.state.isMenuOpen),this.toggleMenu()},{passive:!1}),e.setAttribute("data-bound","true")}const t=document.getElementById("theme-toggle");t&&!t.hasAttribute("data-bound")&&(t.addEventListener("click",e=>{e.preventDefault(),this.toggleTheme()}),t.setAttribute("data-bound","true"));const a=document.getElementById("search-btn");a&&!a.hasAttribute("data-bound")&&(a.addEventListener("click",e=>{e.preventDefault(),this.openSearch()}),a.setAttribute("data-bound","true"));const i=document.getElementById("back-to-top");i&&!i.hasAttribute("data-bound")&&(i.addEventListener("click",e=>{e.preventDefault(),window.scrollTo({top:0,behavior:"smooth"})}),i.setAttribute("data-bound","true")),this.bindMobileMenuLinks()};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",e):e(),this.bindGlobalClickEvent(),this.navigationEventsBound=!0}bindMobileMenuLinks(){const e=document.getElementById("mobile-menu");if(e){e.querySelectorAll("a[data-menu-bound]").forEach(e=>{const t=e.cloneNode(!0);e.parentNode.replaceChild(t,e)});e.querySelectorAll("a").forEach(e=>{e.addEventListener("click",()=>{this.state.isMenuOpen=!1,this.updateMenuState()}),e.setAttribute("data-menu-bound","true")})}}bindGlobalClickEvent(){this.globalClickBound||(document.addEventListener("click",e=>{if(this.state.isMenuOpen){const t=document.getElementById("main-nav");t&&!t.contains(e.target)&&(this.state.isMenuOpen=!1,this.updateMenuState())}}),this.globalClickBound=!0)}initializeEventListeners(){window.addEventListener("resize",this.handleResize),window.addEventListener("scroll",this.handleScroll),this.bindNavigationEvents();window.matchMedia("(prefers-color-scheme: dark)").addListener(e=>{localStorage.getItem("love-memorial-theme")||(this.state.theme=e.matches?"dark":"warm",this.applyTheme())}),document.addEventListener("keydown",e=>{"Escape"===e.key&&(this.closeModals(),this.state.isMenuOpen&&(this.state.isMenuOpen=!1,this.updateMenuState())),e.ctrlKey&&"k"===e.key&&(e.preventDefault(),this.openSearch())}),document.addEventListener("route:changed",e=>{this.handleRouteChange(e.detail)})}initializeRouter(){console.log("🧭 Router initialized")}async initializeParticles(){try{const e=document.createElement("div");e.id="particles-js",e.className="particles-container";for(let t=0;t<50;t++){const t=document.createElement("div");t.className="particle",t.style.left=100*Math.random()+"%",t.style.animationDelay=20*Math.random()+"s",t.style.animationDuration=15+10*Math.random()+"s",e.appendChild(t)}document.body.appendChild(e),console.log("✨ Particles initialized")}catch(e){console.warn("⚠️ Failed to initialize particles:",e)}}initializeTheme(){this.applyTheme(),console.log("🎨 Theme initialized: ".concat(this.state.theme))}applyTheme(){const e=document.body;e.classList.remove("theme-warm","theme-dark"),e.classList.add("theme-".concat(this.state.theme)),localStorage.setItem("love-memorial-theme",this.state.theme),document.dispatchEvent(new CustomEvent("theme:changed",{detail:{theme:this.state.theme}}))}toggleTheme(){this.state.theme="warm"===this.state.theme?"dark":"warm",this.applyTheme(),document.body.style.transition="background 0.5s ease",setTimeout(()=>{document.body.style.transition=""},500)}async preloadResources(){const e=[...s.slice(0,3).map(e=>e.media.coverImage.src)].map(e=>new Promise(t=>{if(e.endsWith(".jpg")||e.endsWith(".png")||e.endsWith(".webp")){const a=new Image;a.onload=t,a.onerror=t,a.src=e}else t()}));await Promise.all(e),console.log("🚀 Resources preloaded")}handleResize(){this.animations.aos&&this.animations.aos.refresh()}handleScroll(){const e=window.pageYOffset||document.documentElement.scrollTop,t=document.querySelector(".navbar");t&&(e>50?t.classList.add("scrolled"):t.classList.remove("scrolled"));const a=document.getElementById("back-to-top");a&&(e>300?a.classList.add("visible"):a.classList.remove("visible"))}handleRouteChange(e){this.state.isMenuOpen=!1,this.updateMenuState(),setTimeout(()=>{this.bindMobileMenuLinks()},100),this.animations.aos&&setTimeout(()=>{this.animations.aos.refresh()},200),"event-detail"!==e.route.name&&window.scrollTo({top:0,behavior:"smooth"})}toggleMenu(){const e=this.state.isMenuOpen;this.state.isMenuOpen=!this.state.isMenuOpen,console.log("菜单状态变化: ".concat(e," -> ").concat(this.state.isMenuOpen)),this.updateMenuState();const t=document.getElementById("menu-toggle");t&&(t.style.pointerEvents="auto")}updateMenuState(){const e=document.getElementById("mobile-menu"),t=document.getElementById("menu-toggle");if(e&&(this.state.isMenuOpen?(e.classList.remove("hidden"),e.classList.add("flex"),this.animations.gsap&&this.animations.gsap.fromTo(e,{opacity:0,y:-20},{opacity:1,y:0,duration:.3,ease:"power2.out"})):this.animations.gsap?this.animations.gsap.to(e,{opacity:0,y:-20,duration:.2,ease:"power2.in",onComplete:()=>{e.classList.add("hidden"),e.classList.remove("flex")}}):(e.classList.add("hidden"),e.classList.remove("flex"))),t){const e=t.querySelectorAll("span");e.length>=3&&(this.state.isMenuOpen?(t.classList.add("active"),this.animations.gsap&&(this.animations.gsap.to(e[0],{rotation:45,y:6,duration:.3,ease:"power2.out"}),this.animations.gsap.to(e[1],{opacity:0,duration:.2}),this.animations.gsap.to(e[2],{rotation:-45,y:-6,duration:.3,ease:"power2.out"}))):(t.classList.remove("active"),this.animations.gsap&&(this.animations.gsap.to(e[0],{rotation:0,y:0,duration:.3,ease:"power2.out"}),this.animations.gsap.to(e[1],{opacity:1,duration:.3,delay:.1}),this.animations.gsap.to(e[2],{rotation:0,y:0,duration:.3,ease:"power2.out"}))))}this.state.isMenuOpen?document.body.style.overflow="hidden":document.body.style.overflow=""}filterEvents(e){this.state.currentFilter=e,this.state.filteredEvents="all"===e?this.state.events:o.getEventsByType(e),document.dispatchEvent(new CustomEvent("events:filtered",{detail:{type:e,events:this.state.filteredEvents}}))}searchEvents(e){this.state.searchQuery=e,e.trim()?(this.state.filteredEvents=o.searchEvents(e),document.dispatchEvent(new CustomEvent("events:searched",{detail:{query:e,events:this.state.filteredEvents}}))):this.filterEvents(this.state.currentFilter)}closeModals(){document.querySelectorAll(".modal, .overlay").forEach(e=>{e.classList.add("hidden")})}openSearch(){c.push("/search")}getState(){return{...this.state}}setState(e){this.state={...this.state,...e},document.dispatchEvent(new CustomEvent("app:state-changed",{detail:this.state}))}getStatistics(){return o.getStatistics()}getUtils(){return o}};window.app=l,"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>l.init()):l.init(),window.addEventListener("error",e=>{console.error("Global error:",e.error)}),window.addEventListener("unhandledrejection",e=>{console.error("Unhandled promise rejection:",e.reason)});export{a as _,e as __vite_legacy_guard,r as a,n as e,s as l,i as s,o as u};
