import{l as e,u as t,e as n}from"./main-B4XCZGvF.js";class a{constructor(t={}){this.options=t,this.currentFilter="all",this.searchQuery="",this.filteredEvents=[...e],this.isLoading=!1}async render(){const a=t.getStatistics();return'\n      <div class="timeline-page pt-24 pb-16">\n        \x3c!-- 页面头部 --\x3e\n        <section class="timeline-header py-16 px-6">\n          <div class="container mx-auto max-w-6xl text-center">\n            <h1 class="text-4xl md:text-6xl font-playfair font-bold text-gradient mb-6" data-aos="fade-up">\n              我们的时光轴\n            </h1>\n            \n            <p class="text-xl text-gray-600 font-noto max-w-3xl mx-auto leading-relaxed mb-12" data-aos="fade-up" data-aos-delay="300">\n              每一个节日，每一个生日，每一个纪念日，都是我们爱情故事中珍贵的片段。\n              让我们一起重温那些美好的时光，感受爱情的温度。\n            </p>\n            \n            \x3c!-- 筛选和搜索区域 --\x3e\n            <div class="timeline-controls space-y-6" data-aos="fade-up" data-aos-delay="600">\n              \x3c!-- 分类筛选 --\x3e\n              <div class="filter-section">\n                <h3 class="text-lg font-medium text-gray-700 mb-4">按类型筛选</h3>\n                <div class="flex flex-wrap justify-center gap-3">\n                  <button class="filter-btn active" data-filter="all">\n                    <span class="mr-2">💖</span>全部\n                  </button>\n                  '.concat(Object.entries(n).map(([e,t])=>'\n                    <button class="filter-btn" data-filter="'.concat(e,'">\n                      <span class="mr-2">').concat(t.icon,"</span>").concat(t.name,"\n                    </button>\n                  ")).join(""),'\n                </div>\n              </div>\n              \n              \x3c!-- 搜索框 --\x3e\n              <div class="search-section max-w-md mx-auto">\n                <div class="relative">\n                  <input type="text" \n                         id="timeline-search" \n                         placeholder="搜索回忆..."\n                         class="w-full px-4 py-3 pl-12 pr-4 rounded-2xl border-2 border-gray-200 focus:border-pink-400 focus:outline-none transition-colors duration-300 glass-effect">\n                  <span class="absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400">🔍</span>\n                </div>\n              </div>\n              \n              \x3c!-- 统计信息 --\x3e\n              <div class="timeline-stats grid grid-cols-2 md:grid-cols-4 gap-4 max-w-2xl mx-auto">\n                <div class="stat-card glass-effect p-4 rounded-xl text-center">\n                  <div class="text-2xl font-bold text-pink-500" id="total-events">').concat(e.length,'</div>\n                  <div class="text-sm text-gray-500">总回忆</div>\n                </div>\n                <div class="stat-card glass-effect p-4 rounded-xl text-center">\n                  <div class="text-2xl font-bold text-purple-500" id="this-year-events">').concat(t.getEventsByYear((new Date).getFullYear().toString()).length,'</div>\n                  <div class="text-sm text-gray-500">今年</div>\n                </div>\n                <div class="stat-card glass-effect p-4 rounded-xl text-center">\n                  <div class="text-2xl font-bold text-indigo-500" id="featured-events">').concat(t.getFeaturedEvents().length,'</div>\n                  <div class="text-sm text-gray-500">精选</div>\n                </div>\n                <div class="stat-card glass-effect p-4 rounded-xl text-center">\n                  <div class="text-2xl font-bold text-rose-500" id="love-days">').concat(a.daysInLove,'</div>\n                  <div class="text-sm text-gray-500">相爱天数</div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </section>\n        \n        \x3c!-- 时光轴主体 --\x3e\n        <section class="timeline-main px-6">\n          <div class="container mx-auto max-w-5xl">\n            \x3c!-- 加载状态 --\x3e\n            <div id="timeline-loading" class="hidden text-center py-12">\n              <div class="loading-heart mx-auto mb-4"></div>\n              <p class="text-gray-500">正在筛选回忆...</p>\n            </div>\n            \n            \x3c!-- 时光轴容器 --\x3e\n            <div id="timeline-container" class="relative">\n              \x3c!-- 中央时间线 --\x3e\n              <div class="timeline-line absolute left-8 md:left-1/2 transform md:-translate-x-1/2 w-1 bg-gradient-to-b from-pink-400 via-purple-400 to-indigo-400 rounded-full"></div>\n              \n              \x3c!-- 事件列表 --\x3e\n              <div id="timeline-events" class="space-y-16">\n                \x3c!-- 事件将通过 JavaScript 动态渲染 --\x3e\n              </div>\n            </div>\n            \n            \x3c!-- 无结果状态 --\x3e\n            <div id="no-results" class="hidden text-center py-20">\n              <div class="text-6xl mb-4">💔</div>\n              <h3 class="text-xl font-playfair font-semibold text-gray-700 mb-2">没有找到相关回忆</h3>\n              <p class="text-gray-500 mb-6">试试调整筛选条件或搜索关键词</p>\n              <button class="btn-primary px-6 py-3 rounded-xl" onclick="this.clearFilters()">\n                清除筛选\n              </button>\n            </div>\n          </div>\n        </section>\n        \n        \x3c!-- 底部导航 --\x3e\n        <section class="timeline-footer py-16 px-6 bg-gradient-to-r from-pink-50 to-purple-50">\n          <div class="container mx-auto max-w-4xl text-center">\n            <h3 class="text-2xl font-playfair font-bold text-gray-800 mb-4">\n              想要查看更多？\n            </h3>\n            <p class="text-gray-600 mb-8">\n              探索我们的其他页面，发现更多美好时光\n            </p>\n            \n            <div class="flex flex-wrap justify-center gap-4">\n              <button class="btn-primary px-6 py-3 rounded-xl" data-navigate="/gallery">\n                <span class="mr-2">🖼️</span>照片画廊\n              </button>\n              <button class="btn-secondary px-6 py-3 rounded-xl" data-navigate="/about">\n                <span class="mr-2">💝</span>关于我们\n              </button>\n            </div>\n          </div>\n        </section>\n      </div>\n    ')}async mount(){try{this.initEventListeners(),this.renderTimeline(),this.initScrollAnimations()}catch(e){console.error("Timeline page mount error:",e)}}initEventListeners(){document.querySelectorAll(".filter-btn").forEach(e=>{e.addEventListener("click",e=>{this.handleFilterChange(e.target.dataset.filter)})});const e=document.getElementById("timeline-search");e&&e.addEventListener("input",e=>{this.handleSearch(e.target.value)}),document.querySelectorAll("[data-navigate]").forEach(e=>{e.addEventListener("click",e=>{const t=e.currentTarget.dataset.navigate;t&&window.router&&window.router.push(t)})})}handleFilterChange(e){document.querySelectorAll(".filter-btn").forEach(e=>{e.classList.remove("active")}),document.querySelector('[data-filter="'.concat(e,'"]')).classList.add("active"),this.currentFilter=e,this.applyFilters()}handleSearch(e){this.searchQuery=e.trim(),this.applyFilters()}applyFilters(){this.showLoading(),setTimeout(()=>{let n=[...e];"all"!==this.currentFilter&&(n=n.filter(e=>e.type===this.currentFilter)),this.searchQuery&&(n=t.searchEvents(this.searchQuery)),this.filteredEvents=n,this.renderTimeline(),this.hideLoading()},300)}showLoading(){document.getElementById("timeline-loading").classList.remove("hidden"),document.getElementById("timeline-events").style.opacity="0.5"}hideLoading(){document.getElementById("timeline-loading").classList.add("hidden"),document.getElementById("timeline-events").style.opacity="1"}renderTimeline(){const e=document.getElementById("timeline-events"),n=document.getElementById("no-results");if(!e)return;if(0===this.filteredEvents.length)return e.innerHTML="",void n.classList.remove("hidden");n.classList.add("hidden");const a=t.sortByDate();e.innerHTML=a.map((e,t)=>this.createEventCard(e,t)).join(""),this.initScrollAnimations(),this.bindEventCardClicks()}createEventCard(e,t){var a;const s=t%2==0?"md:pr-8 md:text-right":"md:pl-8 md:ml-auto";return'\n      <div class="timeline-event relative" data-aos="fade-up" data-aos-delay="'.concat(100*t,'">\n        \x3c!-- 时间点 --\x3e\n        <div class="timeline-dot absolute left-6 md:left-1/2 transform md:-translate-x-1/2 w-6 h-6 rounded-full border-4 border-white shadow-lg bg-gradient-to-r ').concat(e.theme.primary,' z-10"></div>\n        \n        \x3c!-- 事件卡片 --\x3e\n        <div class="timeline-card ml-16 md:ml-0 md:w-1/2 ').concat(s,'">\n          <div class="event-card card-glass p-6 rounded-2xl transform hover:scale-105 transition-all duration-300 cursor-pointer" data-event-id="').concat(e.id,'">\n            \x3c!-- 卡片头部 --\x3e\n            <div class="event-header mb-4">\n              <div class="flex items-center justify-between mb-2">\n                <span class="event-date text-sm text-gray-500 font-medium">\n                  ').concat(e.dates.displayDate," ").concat(e.dates.year,'\n                </span>\n                <span class="event-type px-3 py-1 rounded-full text-xs font-medium bg-gradient-to-r ').concat(e.theme.primary,' text-white">\n                  ').concat(null==(a=n[e.type])?void 0:a.icon," ").concat(e.name,'\n                </span>\n              </div>\n              \n              <h3 class="event-title text-xl font-playfair font-semibold text-gray-800 mb-2">\n                ').concat(e.title,"\n              </h3>\n            </div>\n            \n            \x3c!-- 封面图片 --\x3e\n            ").concat(e.media.coverImage?'\n              <div class="event-image mb-4 overflow-hidden rounded-xl">\n                <img src="'.concat(e.media.coverImage.src,'" \n                     alt="').concat(e.media.coverImage.alt,'"\n                     class="w-full h-48 object-cover transform hover:scale-110 transition-transform duration-500"\n                     onerror="this.src=\'https://via.placeholder.com/400x300/f8fafc/64748b?text=美好回忆\'">\n              </div>\n            '):"",'\n            \n            \x3c!-- 描述 --\x3e\n            <p class="event-description text-gray-600 leading-relaxed line-clamp-3 mb-4">\n              ').concat(e.description.short,'\n            </p>\n            \n            \x3c!-- 标签 --\x3e\n            <div class="event-tags flex flex-wrap gap-2 mb-4">\n              ').concat(e.metadata.tags.slice(0,3).map(e=>'\n                <span class="tag px-2 py-1 rounded-full text-xs bg-gray-100 text-gray-600">\n                  '.concat(e,"\n                </span>\n              ")).join(""),'\n            </div>\n            \n            \x3c!-- 卡片底部 --\x3e\n            <div class="event-footer flex items-center justify-between">\n              <div class="event-stats flex items-center space-x-4 text-sm text-gray-500">\n                <span>📍 ').concat(e.location||"未知地点","</span>\n                ").concat(e.metadata.significance?"\n                  <span>".concat("⭐".repeat(e.metadata.significance),"</span>\n                "):"",'\n              </div>\n              \n              <span class="view-detail text-pink-500 text-sm font-medium">\n                查看详情 →\n              </span>\n            </div>\n          </div>\n        </div>\n      </div>\n    ')}bindEventCardClicks(){document.querySelectorAll(".event-card[data-event-id]").forEach(e=>{e.addEventListener("click",()=>{const t=e.dataset.eventId;t&&window.router&&window.router.push("/event/".concat(t))})})}initScrollAnimations(){const e=document.querySelector(".timeline-line"),t=document.getElementById("timeline-container");e&&t&&(e.style.height=t.offsetHeight+"px");const n=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&e.target.classList.add("animate-pulse-glow")})},{threshold:.5});document.querySelectorAll(".timeline-dot").forEach(e=>{n.observe(e)})}clearFilters(){this.currentFilter="all",this.searchQuery="",document.querySelectorAll(".filter-btn").forEach(e=>{e.classList.remove("active")}),document.querySelector('[data-filter="all"]').classList.add("active");const e=document.getElementById("timeline-search");e&&(e.value=""),this.applyFilters()}unmount(){}}export{a as default};
